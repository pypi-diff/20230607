# Comparing `tmp/cog-0.8.0b1-py3-none-any.whl.zip` & `tmp/cog-0.8.0b2-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,30 +1,99 @@
-Zip file size: 41622 bytes, number of entries: 28
--rw-r--r--  2.0 unx       13 b- defN 23-Jun-05 12:25 cog/.gitignore
--rw-r--r--  2.0 unx      362 b- defN 23-Jun-05 12:25 cog/__init__.py
--rw-r--r--  2.0 unx      162 b- defN 23-Jun-05 12:26 cog/_version.py
--rw-r--r--  2.0 unx      286 b- defN 23-Jun-05 12:25 cog/errors.py
--rw-r--r--  2.0 unx     2066 b- defN 23-Jun-05 12:25 cog/files.py
--rw-r--r--  2.0 unx     1973 b- defN 23-Jun-05 12:25 cog/json.py
--rw-r--r--  2.0 unx     3130 b- defN 23-Jun-05 12:25 cog/logging.py
--rw-r--r--  2.0 unx    10957 b- defN 23-Jun-05 12:25 cog/predictor.py
--rw-r--r--  2.0 unx     2385 b- defN 23-Jun-05 12:25 cog/schema.py
--rw-r--r--  2.0 unx      645 b- defN 23-Jun-05 12:25 cog/suppress_output.py
--rw-r--r--  2.0 unx     7206 b- defN 23-Jun-05 12:25 cog/types.py
--rw-r--r--  2.0 unx        0 b- defN 23-Jun-05 12:25 cog/command/__init__.py
--rw-r--r--  2.0 unx      781 b- defN 23-Jun-05 12:25 cog/command/openapi_schema.py
--rw-r--r--  2.0 unx        0 b- defN 23-Jun-05 12:25 cog/server/__init__.py
--rw-r--r--  2.0 unx      593 b- defN 23-Jun-05 12:25 cog/server/eventtypes.py
--rw-r--r--  2.0 unx      149 b- defN 23-Jun-05 12:25 cog/server/exceptions.py
--rw-r--r--  2.0 unx     5334 b- defN 23-Jun-05 12:25 cog/server/helpers.py
--rw-r--r--  2.0 unx    11733 b- defN 23-Jun-05 12:25 cog/server/http.py
--rw-r--r--  2.0 unx      950 b- defN 23-Jun-05 12:25 cog/server/probes.py
--rw-r--r--  2.0 unx      650 b- defN 23-Jun-05 12:25 cog/server/response_throttler.py
--rw-r--r--  2.0 unx    14135 b- defN 23-Jun-05 12:25 cog/server/runner.py
--rw-r--r--  2.0 unx     3092 b- defN 23-Jun-05 12:25 cog/server/webhook.py
--rw-r--r--  2.0 unx     7954 b- defN 23-Jun-05 12:25 cog/server/worker.py
--rw-r--r--  2.0 unx    11347 b- defN 23-Jun-05 12:26 cog-0.8.0b1.dist-info/LICENSE
--rw-r--r--  2.0 unx    34291 b- defN 23-Jun-05 12:26 cog-0.8.0b1.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Jun-05 12:26 cog-0.8.0b1.dist-info/WHEEL
--rw-r--r--  2.0 unx        4 b- defN 23-Jun-05 12:26 cog-0.8.0b1.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2105 b- defN 23-Jun-05 12:26 cog-0.8.0b1.dist-info/RECORD
-28 files, 122395 bytes uncompressed, 38312 bytes compressed:  68.7%
+Zip file size: 77458 bytes, number of entries: 97
+-rw-r--r--  2.0 unx       13 b- defN 23-Jun-07 20:05 cog/.gitignore
+-rw-r--r--  2.0 unx      362 b- defN 23-Jun-07 20:05 cog/__init__.py
+-rw-r--r--  2.0 unx      162 b- defN 23-Jun-07 20:06 cog/_version.py
+-rw-r--r--  2.0 unx      286 b- defN 23-Jun-07 20:05 cog/errors.py
+-rw-r--r--  2.0 unx     2066 b- defN 23-Jun-07 20:05 cog/files.py
+-rw-r--r--  2.0 unx     1973 b- defN 23-Jun-07 20:05 cog/json.py
+-rw-r--r--  2.0 unx     3171 b- defN 23-Jun-07 20:05 cog/logging.py
+-rw-r--r--  2.0 unx    11055 b- defN 23-Jun-07 20:05 cog/predictor.py
+-rw-r--r--  2.0 unx     2385 b- defN 23-Jun-07 20:05 cog/schema.py
+-rw-r--r--  2.0 unx      645 b- defN 23-Jun-07 20:05 cog/suppress_output.py
+-rw-r--r--  2.0 unx     7418 b- defN 23-Jun-07 20:05 cog/types.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-07 20:05 cog/command/__init__.py
+-rw-r--r--  2.0 unx      761 b- defN 23-Jun-07 20:05 cog/command/openapi_schema.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-07 20:05 cog/server/__init__.py
+-rw-r--r--  2.0 unx      593 b- defN 23-Jun-07 20:05 cog/server/eventtypes.py
+-rw-r--r--  2.0 unx      149 b- defN 23-Jun-07 20:05 cog/server/exceptions.py
+-rw-r--r--  2.0 unx     5349 b- defN 23-Jun-07 20:05 cog/server/helpers.py
+-rw-r--r--  2.0 unx    11768 b- defN 23-Jun-07 20:05 cog/server/http.py
+-rw-r--r--  2.0 unx      958 b- defN 23-Jun-07 20:05 cog/server/probes.py
+-rw-r--r--  2.0 unx      650 b- defN 23-Jun-07 20:05 cog/server/response_throttler.py
+-rw-r--r--  2.0 unx    14284 b- defN 23-Jun-07 20:05 cog/server/runner.py
+-rw-r--r--  2.0 unx     3092 b- defN 23-Jun-07 20:05 cog/server/webhook.py
+-rw-r--r--  2.0 unx     7970 b- defN 23-Jun-07 20:05 cog/server/worker.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-07 20:05 tests/__init__.py
+-rw-r--r--  2.0 unx      536 b- defN 23-Jun-07 20:05 tests/conftest.py
+-rw-r--r--  2.0 unx     1733 b- defN 23-Jun-07 20:05 tests/test_json.py
+-rw-r--r--  2.0 unx      486 b- defN 23-Jun-07 20:05 tests/test_predictor.py
+-rw-r--r--  2.0 unx     1467 b- defN 23-Jun-07 20:05 tests/test_types.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-07 20:05 tests/server/__init__.py
+-rw-r--r--  2.0 unx     2056 b- defN 23-Jun-07 20:05 tests/server/conftest.py
+-rw-r--r--  2.0 unx     4692 b- defN 23-Jun-07 20:05 tests/server/test_helpers.py
+-rw-r--r--  2.0 unx    15179 b- defN 23-Jun-07 20:05 tests/server/test_http.py
+-rw-r--r--  2.0 unx     6959 b- defN 23-Jun-07 20:05 tests/server/test_http_input.py
+-rw-r--r--  2.0 unx     4020 b- defN 23-Jun-07 20:05 tests/server/test_http_output.py
+-rw-r--r--  2.0 unx     1334 b- defN 23-Jun-07 20:05 tests/server/test_probes.py
+-rw-r--r--  2.0 unx     1210 b- defN 23-Jun-07 20:05 tests/server/test_response_throttler.py
+-rw-r--r--  2.0 unx    10943 b- defN 23-Jun-07 20:05 tests/server/test_runner.py
+-rw-r--r--  2.0 unx     3225 b- defN 23-Jun-07 20:05 tests/server/test_webhook.py
+-rw-r--r--  2.0 unx    16095 b- defN 23-Jun-07 20:05 tests/server/test_worker.py
+-rw-r--r--  2.0 unx      199 b- defN 23-Jun-07 20:05 tests/server/fixtures/catch_in_predict.py
+-rw-r--r--  2.0 unx      232 b- defN 23-Jun-07 20:05 tests/server/fixtures/complex_output.py
+-rw-r--r--  2.0 unx      131 b- defN 23-Jun-07 20:05 tests/server/fixtures/count_up.py
+-rw-r--r--  2.0 unx      136 b- defN 23-Jun-07 20:05 tests/server/fixtures/exc_in_predict.py
+-rw-r--r--  2.0 unx      133 b- defN 23-Jun-07 20:05 tests/server/fixtures/exc_in_setup.py
+-rw-r--r--  2.0 unx      151 b- defN 23-Jun-07 20:05 tests/server/fixtures/exc_in_setup_and_predict.py
+-rw-r--r--  2.0 unx       56 b- defN 23-Jun-07 20:05 tests/server/fixtures/exc_on_import.py
+-rw-r--r--  2.0 unx      122 b- defN 23-Jun-07 20:05 tests/server/fixtures/exit_in_predict.py
+-rw-r--r--  2.0 unx      124 b- defN 23-Jun-07 20:05 tests/server/fixtures/exit_in_setup.py
+-rw-r--r--  2.0 unx       23 b- defN 23-Jun-07 20:05 tests/server/fixtures/exit_on_import.py
+-rw-r--r--  2.0 unx       58 b- defN 23-Jun-07 20:05 tests/server/fixtures/function.py
+-rw-r--r--  2.0 unx      159 b- defN 23-Jun-07 20:05 tests/server/fixtures/hello_world.py
+-rw-r--r--  2.0 unx      197 b- defN 23-Jun-07 20:05 tests/server/fixtures/input_choices.py
+-rw-r--r--  2.0 unx      153 b- defN 23-Jun-07 20:05 tests/server/fixtures/input_choices_integer.py
+-rw-r--r--  2.0 unx      139 b- defN 23-Jun-07 20:05 tests/server/fixtures/input_file.py
+-rw-r--r--  2.0 unx      160 b- defN 23-Jun-07 20:05 tests/server/fixtures/input_ge_le.py
+-rw-r--r--  2.0 unx      126 b- defN 23-Jun-07 20:05 tests/server/fixtures/input_integer.py
+-rw-r--r--  2.0 unx      152 b- defN 23-Jun-07 20:05 tests/server/fixtures/input_integer_default.py
+-rw-r--r--  2.0 unx      317 b- defN 23-Jun-07 20:05 tests/server/fixtures/input_multiple.py
+-rw-r--r--  2.0 unx      118 b- defN 23-Jun-07 20:05 tests/server/fixtures/input_none.py
+-rw-r--r--  2.0 unx      236 b- defN 23-Jun-07 20:05 tests/server/fixtures/input_path.py
+-rw-r--r--  2.0 unx      137 b- defN 23-Jun-07 20:05 tests/server/fixtures/input_path_2.py
+-rw-r--r--  2.0 unx      125 b- defN 23-Jun-07 20:05 tests/server/fixtures/input_string.py
+-rw-r--r--  2.0 unx      205 b- defN 23-Jun-07 20:05 tests/server/fixtures/input_unsupported_type.py
+-rw-r--r--  2.0 unx      122 b- defN 23-Jun-07 20:05 tests/server/fixtures/input_untyped.py
+-rw-r--r--  2.0 unx      160 b- defN 23-Jun-07 20:05 tests/server/fixtures/killed_in_predict.py
+-rw-r--r--  2.0 unx      882 b- defN 23-Jun-07 20:05 tests/server/fixtures/logging.py
+-rw-r--r--  2.0 unx      109 b- defN 23-Jun-07 20:05 tests/server/fixtures/missing_predict.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jun-07 20:05 tests/server/fixtures/missing_predictor.py
+-rw-r--r--  2.0 unx      481 b- defN 23-Jun-07 20:05 tests/server/fixtures/openapi_complex_input.py
+-rw-r--r--  2.0 unx      332 b- defN 23-Jun-07 20:05 tests/server/fixtures/openapi_custom_output_type.py
+-rw-r--r--  2.0 unx      169 b- defN 23-Jun-07 20:05 tests/server/fixtures/openapi_input_int_choices.py
+-rw-r--r--  2.0 unx      153 b- defN 23-Jun-07 20:05 tests/server/fixtures/openapi_output_list.py
+-rw-r--r--  2.0 unx      374 b- defN 23-Jun-07 20:05 tests/server/fixtures/openapi_output_type.py
+-rw-r--r--  2.0 unx      161 b- defN 23-Jun-07 20:05 tests/server/fixtures/openapi_output_yield.py
+-rw-r--r--  2.0 unx      264 b- defN 23-Jun-07 20:05 tests/server/fixtures/output_complex.py
+-rw-r--r--  2.0 unx      148 b- defN 23-Jun-07 20:05 tests/server/fixtures/output_file.py
+-rw-r--r--  2.0 unx      192 b- defN 23-Jun-07 20:05 tests/server/fixtures/output_file_named.py
+-rw-r--r--  2.0 unx      257 b- defN 23-Jun-07 20:05 tests/server/fixtures/output_iterator_complex.py
+-rw-r--r--  2.0 unx      151 b- defN 23-Jun-07 20:05 tests/server/fixtures/output_numpy.py
+-rw-r--r--  2.0 unx      355 b- defN 23-Jun-07 20:05 tests/server/fixtures/output_path_image.py
+-rw-r--r--  2.0 unx      323 b- defN 23-Jun-07 20:05 tests/server/fixtures/output_path_text.py
+-rw-r--r--  2.0 unx      115 b- defN 23-Jun-07 20:05 tests/server/fixtures/output_wrong_type.py
+-rw-r--r--  2.0 unx      175 b- defN 23-Jun-07 20:05 tests/server/fixtures/setup.py
+-rw-r--r--  2.0 unx      167 b- defN 23-Jun-07 20:05 tests/server/fixtures/setup_weights.py
+-rw-r--r--  2.0 unx      118 b- defN 23-Jun-07 20:05 tests/server/fixtures/simple.py
+-rw-r--r--  2.0 unx      193 b- defN 23-Jun-07 20:05 tests/server/fixtures/sleep.py
+-rw-r--r--  2.0 unx      219 b- defN 23-Jun-07 20:05 tests/server/fixtures/slow_predict.py
+-rw-r--r--  2.0 unx      290 b- defN 23-Jun-07 20:05 tests/server/fixtures/steps.py
+-rw-r--r--  2.0 unx      263 b- defN 23-Jun-07 20:05 tests/server/fixtures/yield_concatenate_iterator.py
+-rw-r--r--  2.0 unx      506 b- defN 23-Jun-07 20:05 tests/server/fixtures/yield_files.py
+-rw-r--r--  2.0 unx      245 b- defN 23-Jun-07 20:05 tests/server/fixtures/yield_strings.py
+-rw-r--r--  2.0 unx      339 b- defN 23-Jun-07 20:05 tests/server/fixtures/yield_strings_file_input.py
+-rw-r--r--  2.0 unx    11347 b- defN 23-Jun-07 20:06 cog-0.8.0b2.dist-info/LICENSE
+-rw-r--r--  2.0 unx    34795 b- defN 23-Jun-07 20:06 cog-0.8.0b2.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jun-07 20:06 cog-0.8.0b2.dist-info/WHEEL
+-rw-r--r--  2.0 unx       10 b- defN 23-Jun-07 20:06 cog-0.8.0b2.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     8484 b- defN 23-Jun-07 20:06 cog-0.8.0b2.dist-info/RECORD
+97 files, 210625 bytes uncompressed, 63888 bytes compressed:  69.7%
```

## zipnote {}

```diff
@@ -63,23 +63,230 @@
 
 Filename: cog/server/webhook.py
 Comment: 
 
 Filename: cog/server/worker.py
 Comment: 
 
-Filename: cog-0.8.0b1.dist-info/LICENSE
+Filename: tests/__init__.py
 Comment: 
 
-Filename: cog-0.8.0b1.dist-info/METADATA
+Filename: tests/conftest.py
 Comment: 
 
-Filename: cog-0.8.0b1.dist-info/WHEEL
+Filename: tests/test_json.py
 Comment: 
 
-Filename: cog-0.8.0b1.dist-info/top_level.txt
+Filename: tests/test_predictor.py
 Comment: 
 
-Filename: cog-0.8.0b1.dist-info/RECORD
+Filename: tests/test_types.py
+Comment: 
+
+Filename: tests/server/__init__.py
+Comment: 
+
+Filename: tests/server/conftest.py
+Comment: 
+
+Filename: tests/server/test_helpers.py
+Comment: 
+
+Filename: tests/server/test_http.py
+Comment: 
+
+Filename: tests/server/test_http_input.py
+Comment: 
+
+Filename: tests/server/test_http_output.py
+Comment: 
+
+Filename: tests/server/test_probes.py
+Comment: 
+
+Filename: tests/server/test_response_throttler.py
+Comment: 
+
+Filename: tests/server/test_runner.py
+Comment: 
+
+Filename: tests/server/test_webhook.py
+Comment: 
+
+Filename: tests/server/test_worker.py
+Comment: 
+
+Filename: tests/server/fixtures/catch_in_predict.py
+Comment: 
+
+Filename: tests/server/fixtures/complex_output.py
+Comment: 
+
+Filename: tests/server/fixtures/count_up.py
+Comment: 
+
+Filename: tests/server/fixtures/exc_in_predict.py
+Comment: 
+
+Filename: tests/server/fixtures/exc_in_setup.py
+Comment: 
+
+Filename: tests/server/fixtures/exc_in_setup_and_predict.py
+Comment: 
+
+Filename: tests/server/fixtures/exc_on_import.py
+Comment: 
+
+Filename: tests/server/fixtures/exit_in_predict.py
+Comment: 
+
+Filename: tests/server/fixtures/exit_in_setup.py
+Comment: 
+
+Filename: tests/server/fixtures/exit_on_import.py
+Comment: 
+
+Filename: tests/server/fixtures/function.py
+Comment: 
+
+Filename: tests/server/fixtures/hello_world.py
+Comment: 
+
+Filename: tests/server/fixtures/input_choices.py
+Comment: 
+
+Filename: tests/server/fixtures/input_choices_integer.py
+Comment: 
+
+Filename: tests/server/fixtures/input_file.py
+Comment: 
+
+Filename: tests/server/fixtures/input_ge_le.py
+Comment: 
+
+Filename: tests/server/fixtures/input_integer.py
+Comment: 
+
+Filename: tests/server/fixtures/input_integer_default.py
+Comment: 
+
+Filename: tests/server/fixtures/input_multiple.py
+Comment: 
+
+Filename: tests/server/fixtures/input_none.py
+Comment: 
+
+Filename: tests/server/fixtures/input_path.py
+Comment: 
+
+Filename: tests/server/fixtures/input_path_2.py
+Comment: 
+
+Filename: tests/server/fixtures/input_string.py
+Comment: 
+
+Filename: tests/server/fixtures/input_unsupported_type.py
+Comment: 
+
+Filename: tests/server/fixtures/input_untyped.py
+Comment: 
+
+Filename: tests/server/fixtures/killed_in_predict.py
+Comment: 
+
+Filename: tests/server/fixtures/logging.py
+Comment: 
+
+Filename: tests/server/fixtures/missing_predict.py
+Comment: 
+
+Filename: tests/server/fixtures/missing_predictor.py
+Comment: 
+
+Filename: tests/server/fixtures/openapi_complex_input.py
+Comment: 
+
+Filename: tests/server/fixtures/openapi_custom_output_type.py
+Comment: 
+
+Filename: tests/server/fixtures/openapi_input_int_choices.py
+Comment: 
+
+Filename: tests/server/fixtures/openapi_output_list.py
+Comment: 
+
+Filename: tests/server/fixtures/openapi_output_type.py
+Comment: 
+
+Filename: tests/server/fixtures/openapi_output_yield.py
+Comment: 
+
+Filename: tests/server/fixtures/output_complex.py
+Comment: 
+
+Filename: tests/server/fixtures/output_file.py
+Comment: 
+
+Filename: tests/server/fixtures/output_file_named.py
+Comment: 
+
+Filename: tests/server/fixtures/output_iterator_complex.py
+Comment: 
+
+Filename: tests/server/fixtures/output_numpy.py
+Comment: 
+
+Filename: tests/server/fixtures/output_path_image.py
+Comment: 
+
+Filename: tests/server/fixtures/output_path_text.py
+Comment: 
+
+Filename: tests/server/fixtures/output_wrong_type.py
+Comment: 
+
+Filename: tests/server/fixtures/setup.py
+Comment: 
+
+Filename: tests/server/fixtures/setup_weights.py
+Comment: 
+
+Filename: tests/server/fixtures/simple.py
+Comment: 
+
+Filename: tests/server/fixtures/sleep.py
+Comment: 
+
+Filename: tests/server/fixtures/slow_predict.py
+Comment: 
+
+Filename: tests/server/fixtures/steps.py
+Comment: 
+
+Filename: tests/server/fixtures/yield_concatenate_iterator.py
+Comment: 
+
+Filename: tests/server/fixtures/yield_files.py
+Comment: 
+
+Filename: tests/server/fixtures/yield_strings.py
+Comment: 
+
+Filename: tests/server/fixtures/yield_strings_file_input.py
+Comment: 
+
+Filename: cog-0.8.0b2.dist-info/LICENSE
+Comment: 
+
+Filename: cog-0.8.0b2.dist-info/METADATA
+Comment: 
+
+Filename: cog-0.8.0b2.dist-info/WHEEL
+Comment: 
+
+Filename: cog-0.8.0b2.dist-info/top_level.txt
+Comment: 
+
+Filename: cog-0.8.0b2.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## cog/__init__.py

```diff
@@ -1,11 +1,11 @@
 from pydantic import BaseModel
 
 from .predictor import BasePredictor
-from .types import File, Input, Path, ConcatenateIterator
+from .types import ConcatenateIterator, File, Input, Path
 
 try:
     from ._version import __version__
 except ImportError:
     __version__ = "0.0.0+unknown"
```

## cog/_version.py

```diff
@@ -1,4 +1,4 @@
 # file generated by setuptools_scm
 # don't change, don't track in version control
-__version__ = version = '0.8.0b1'
+__version__ = version = '0.8.0b2'
 __version_tuple__ = version_tuple = (0, 8, 0)
```

## cog/json.py

 * *Ordering differences only*

```diff
@@ -1,10 +1,10 @@
+import io
 from datetime import datetime
 from enum import Enum
-import io
 from types import GeneratorType
 from typing import Any, Callable
 
 from pydantic import BaseModel
 
 from .types import Path
```

## cog/logging.py

```diff
@@ -1,9 +1,9 @@
-import os
 import logging
+import os
 
 import structlog
 from structlog.typing import EventDict
 
 
 def replace_level_with_severity(
     _: logging.Logger, __: str, event_dict: EventDict
@@ -56,17 +56,17 @@
         processors=processors
         + [structlog.stdlib.ProcessorFormatter.wrap_for_formatter],
         logger_factory=structlog.stdlib.LoggerFactory(),
         cache_logger_on_first_use=True,
     )
 
     if development_logs:
-        log_renderer = structlog.dev.ConsoleRenderer(event_key="message")
+        log_renderer = structlog.dev.ConsoleRenderer(event_key="message")  # type: ignore
     else:
-        log_renderer = structlog.processors.JSONRenderer()
+        log_renderer = structlog.processors.JSONRenderer()  # type: ignore
 
     formatter = structlog.stdlib.ProcessorFormatter(
         foreign_pre_chain=processors,
         processors=[
             structlog.stdlib.ProcessorFormatter.remove_processors_meta,
             log_renderer,
         ],
@@ -76,14 +76,14 @@
     handler.setFormatter(formatter)
 
     root = logging.getLogger()
     root.addHandler(handler)
     root.setLevel(log_level)
 
     # Propagate uvicorn logs instead of letting uvicorn configure the format
-    for l in ["uvicorn", "uvicorn.access", "uvicorn.error"]:
-        logging.getLogger(l).handlers.clear()
-        logging.getLogger(l).propagate = True
+    for name in ["uvicorn", "uvicorn.access", "uvicorn.error"]:
+        logging.getLogger(name).handlers.clear()
+        logging.getLogger(name).propagate = True
 
     # Reconfigure log levels for some overly chatty libraries
     logging.getLogger("uvicorn.access").setLevel(logging.WARNING)
     logging.getLogger("urllib3.connectionpool").setLevel(logging.ERROR)
```

## cog/predictor.py

```diff
@@ -1,58 +1,62 @@
-from abc import ABC, abstractmethod
-from collections.abc import Iterator
 import enum
 import importlib.util
 import inspect
 import io
 import os.path
+from abc import ABC, abstractmethod
+from collections.abc import Iterator
 from pathlib import Path
-from pydantic import create_model, BaseModel, Field
-from pydantic.fields import FieldInfo
 from typing import (
     Any,
     Callable,
     Dict,
     List,
     Optional,
     Type,
     Union,
-    get_origin,
     get_args,
+    get_origin,
 )
 
+import yaml
+from pydantic import BaseModel, Field, create_model
+from pydantic.fields import FieldInfo
+
 # Added in Python 3.9. Can be from typing if we drop support for <3.9
 from typing_extensions import Annotated
-import yaml
 
 from .errors import ConfigDoesNotExist, PredictorNotSet
 from .types import (
-    Input,
-    Path as CogPath,
     File as CogFile,
-    URLFile,
+)
+from .types import (
+    Input,
     URLPath,
-    get_filename,
 )
-
+from .types import (
+    Path as CogPath,
+)
 
 ALLOWED_INPUT_TYPES = [str, int, float, bool, CogFile, CogPath]
 
 
 class BasePredictor(ABC):
     def setup(self, weights: Optional[Union[CogFile, CogPath]] = None) -> None:
         """
         An optional method to prepare the model so multiple predictions run efficiently.
         """
+        return
 
     @abstractmethod
     def predict(self, **kwargs: Any) -> Any:
         """
         Run a single prediction on the model
         """
+        pass
 
 
 def run_setup(predictor: BasePredictor) -> None:
     weights_type = get_weights_type(predictor.setup)
 
     # No weights need to be passed, so just run setup() without any arguments.
     if weights_type is None:
@@ -87,15 +91,15 @@
             )
     else:
         weights = None
 
     predictor.setup(weights=weights)
 
 
-def get_weights_type(setup_function) -> Optional[Any]:
+def get_weights_type(setup_function: Callable) -> Optional[Any]:
     signature = inspect.signature(setup_function)
     if "weights" not in signature.parameters:
         return None
     Type = signature.parameters["weights"].annotation
     # Handle Optional. It is Union[Type, None]
     if get_origin(Type) == Union:
         args = get_args(Type)
@@ -123,18 +127,18 @@
     Reads cog.yaml and returns it as a dict.
     """
     # Assumes the working directory is /src
     config_path = os.path.abspath("cog.yaml")
     try:
         with open(config_path) as fh:
             config = yaml.safe_load(fh)
-    except FileNotFoundError:
+    except FileNotFoundError as e:
         raise ConfigDoesNotExist(
             f"Could not find {config_path}",
-        )
+        ) from e
     return config
 
 
 def load_predictor(config: Dict[str, Any]) -> BasePredictor:
     """
     Constructs an instance of the user-defined Predictor class from a config.
     """
@@ -188,15 +192,15 @@
                 value.unlink()
             # Note this is pathlib.Path, which cog.Path is a subclass of. A pathlib.Path object shouldn't make its way here,
             # but both have an unlink() method, so may as well be safe.
             elif isinstance(value, Path):
                 value.unlink(missing_ok=True)
 
 
-def get_predict(predictor):
+def get_predict(predictor: Any) -> Callable:
     if hasattr(predictor, "predict"):
         return predictor.predict
     return predictor
 
 
 def get_input_type(predictor: BasePredictor) -> Type[BaseInput]:
     """
@@ -269,15 +273,15 @@
     return create_model(
         "Input",
         __config__=None,
         __base__=BaseInput,
         __module__=__name__,
         __validators__=None,
         **create_model_kwargs,
-    )
+    )  # type: ignore
 
 
 def get_output_type(predictor: BasePredictor) -> Type[BaseModel]:
     """
     Creates a Pydantic Output model from the return type annotation of a Predictor's predict() method.
     """
     predict = get_predict(predictor)
```

## cog/types.py

```diff
@@ -1,20 +1,19 @@
+import base64
 import io
 import mimetypes
 import os
-import base64
 import pathlib
-import requests
 import shutil
 import tempfile
-from typing import Any, Callable, Dict, Iterator, List, TypeVar, Union
+from typing import Any, Dict, Iterator, List, Optional, TypeVar, Union
 from urllib.parse import urlparse
 
+import requests
 from pydantic import Field
-from pydantic.typing import NoArgAnyCallable
 
 
 def Input(
     default: Any = ...,
     description: str = None,
     ge: float = None,
     le: float = None,
@@ -98,103 +97,107 @@
     URLPath is a nasty hack to ensure that we can defer the downloading of a
     URL passed as a path until later in prediction dispatch.
 
     It subclasses pathlib.PosixPath only so that it can pass isinstance(_,
     pathlib.Path) checks.
     """
 
-    def __init__(self, *, source: str, filename: str, fileobj: io.IOBase):
+    _path: Optional[Path]
+
+    def __init__(self, *, source: str, filename: str, fileobj: io.IOBase) -> None:
         self.source = source
         self.filename = filename
         self.fileobj = fileobj
 
         self._path = None
 
-    def convert(self):
+    def convert(self) -> Path:
         if self._path is None:
             dest = tempfile.NamedTemporaryFile(suffix=self.filename, delete=False)
             shutil.copyfileobj(self.fileobj, dest)
             self._path = Path(dest.name)
         return self._path
 
-    def unlink(self):
+    def unlink(self, missing_ok: bool = False) -> None:
         if self._path and self._path.exists():
-            self._path.unlink()
+            self._path.unlink(missing_ok=missing_ok)
 
-    def __str__(self):
+    def __str__(self) -> str:
         # FastAPI's jsonable_encoder will encode subclasses of pathlib.Path by
         # calling str() on them
         return self.source
 
 
 class URLFile(io.IOBase):
     """
     URLFile is a proxy object for a :class:`urllib3.response.HTTPResponse`
     object that is created lazily. It's a file-like object constructed from a
     URL that can survive pickling/unpickling.
     """
 
     __slots__ = ("__target__", "__url__")
 
-    def __init__(self, url):
+    def __init__(self, url: str) -> None:
         object.__setattr__(self, "__url__", url)
 
     # We provide __getstate__ and __setstate__ explicitly to ensure that the
     # object is always picklable.
-    def __getstate__(self):
+    def __getstate__(self) -> Dict[str, Any]:
         return {"url": object.__getattribute__(self, "__url__")}
 
-    def __setstate__(self, state):
+    def __setstate__(self, state: Dict[str, Any]) -> None:
         object.__setattr__(self, "__url__", state["url"])
 
     # Proxy getattr/setattr/delattr through to the response object.
-    def __setattr__(self, name, value):
+    def __setattr__(self, name: str, value: Any) -> None:
         if hasattr(type(self), name):
             object.__setattr__(self, name, value)
         else:
             setattr(self.__wrapped__, name, value)
 
-    def __getattr__(self, name):
+    def __getattr__(self, name: str) -> Any:
         if name in ("__target__", "__wrapped__", "__url__"):
             raise AttributeError(name)
         else:
             return getattr(self.__wrapped__, name)
 
-    def __delattr__(self, name):
+    def __delattr__(self, name: str) -> None:
         if hasattr(type(self), name):
             object.__delattr__(self, name)
         else:
             delattr(self.__wrapped__, name)
 
     # Luckily the only dunder method on HTTPResponse is __iter__
-    def __iter__(self):
+    def __iter__(self) -> Iterator[bytes]:
         return iter(self.__wrapped__)
 
     @property
-    def __wrapped__(self):
+    def __wrapped__(self) -> Any:
         try:
             return object.__getattribute__(self, "__target__")
         except AttributeError:
             url = object.__getattribute__(self, "__url__")
             resp = requests.get(url, stream=True)
             resp.raise_for_status()
             resp.raw.decode_content = True
             object.__setattr__(self, "__target__", resp.raw)
             return resp.raw
 
-    def __repr__(self):
+    def __repr__(self) -> str:
         try:
             target = object.__getattribute__(self, "__target__")
         except AttributeError:
             return "<{} at 0x{:x} for {!r}>".format(
                 type(self).__name__, id(self), object.__getattribute__(self, "__url__")
             )
         else:
             return "<{} at 0x{:x} wrapping {!r}>".format(
-                type(self).__name__, id(self), target, id(target)
+                type(self).__name__,
+                id(self),
+                target,
             )
 
 
 def get_filename(url: str) -> str:
     parsed_url = urlparse(url)
     if parsed_url.scheme == "data":
         header, _ = parsed_url.path.split(",", 1)
```

## cog/command/openapi_schema.py

```diff
@@ -2,18 +2,17 @@
 python -m cog.command.specification
 
 This prints a JSON object describing the inputs of the model.
 """
 import json
 
 from ..errors import ConfigDoesNotExist, PredictorNotSet
-from ..suppress_output import suppress_output
-
-from ..predictor import get_predictor_ref, load_config
+from ..predictor import load_config
 from ..server.http import create_app
+from ..suppress_output import suppress_output
 
 if __name__ == "__main__":
     schema = {}
     try:
         with suppress_output():
             config = load_config()
             app = create_app(config, shutdown_event=None)
```

## cog/server/helpers.py

```diff
@@ -3,15 +3,15 @@
 import selectors
 import threading
 import uuid
 from typing import Callable, Optional, Sequence, TextIO
 
 
 class WrappedStream:
-    def __init__(self, name: str, stream: TextIO):
+    def __init__(self, name: str, stream: TextIO) -> None:
         self.name = name
         self._stream = stream
         self._original_fp: Optional[TextIO] = None
         self._wrapped_fp: Optional[TextIO] = None
 
     def wrap(self) -> None:
         r, w = os.pipe()
@@ -64,15 +64,15 @@
     It also passes the data through to the original stream.
     """
 
     def __init__(
         self,
         streams: Sequence[WrappedStream],
         write_hook: Callable[[str, TextIO, str], None],
-    ):
+    ) -> None:
         self._streams = list(streams)
         self._write_hook = write_hook
         self.drain_token = uuid.uuid4().hex
         self.drain_event = threading.Event()
         self.terminate_token = uuid.uuid4().hex
 
         if len(self._streams) == 0:
@@ -115,15 +115,14 @@
             drain_tokens_needed += 1
 
         while not should_exit:
             for key, _ in selector.select():
                 stream = key.data
 
                 for line in stream.wrapped:
-
                     if not line.endswith("\n"):
                         # TODO: limit how much we're prepared to buffer on a
                         # single line
                         buffers[stream.name].write(line)
                         continue
 
                     full_line = buffers[stream.name].getvalue() + line.strip()
```

## cog/server/http.py

```diff
@@ -1,21 +1,20 @@
 import argparse
 import logging
 import os
 import signal
 import textwrap
 import threading
-from datetime import datetime, timezone
+from enum import Enum, auto, unique
 from typing import Any, Callable, Dict, Optional, Union
 
 import structlog
 import uvicorn
 from anyio import CapacityLimiter
 from anyio.lowlevel import RunVar
-from enum import Enum, auto, unique
 from fastapi import Body, FastAPI, Header, HTTPException, Path, Response
 from fastapi.encoders import jsonable_encoder
 from fastapi.exceptions import RequestValidationError
 from fastapi.responses import JSONResponse
 from pydantic import ValidationError
 from pydantic.error_wrappers import ErrorWrapper
 
@@ -42,15 +41,15 @@
     READY = auto()
     BUSY = auto()
     SETUP_FAILED = auto()
 
 
 def create_app(
     config: Dict[str, Any],
-    shutdown_event: threading.Event,
+    shutdown_event: Optional[threading.Event],
     threads: int = 1,
     upload_url: Optional[str] = None,
     mode: str = "predict",
 ) -> FastAPI:
     app = FastAPI(
         title="Cog",  # TODO: mention model name?
         # version=None # TODO
@@ -192,15 +191,15 @@
         if respond_async:
             return JSONResponse(jsonable_encoder(initial_response), status_code=202)
 
         try:
             response = PredictionResponse(**async_result.get().dict())
         except ValidationError as e:
             _log_invalid_output(e)
-            raise HTTPException(status_code=500)
+            raise HTTPException(status_code=500, detail=str(e)) from e
 
         response_object = response.dict()
         response_object["output"] = upload_files(
             response_object["output"],
             upload_file=lambda fh: upload_file(fh, request.output_file_prefix),  # type: ignore
         )
 
@@ -221,15 +220,16 @@
             return JSONResponse({}, status_code=404)
         else:
             return JSONResponse({}, status_code=200)
 
     @app.post("/shutdown")
     def start_shutdown() -> Any:
         log.info("shutdown requested via http")
-        shutdown_event.set()
+        if shutdown_event is not None:
+            shutdown_event.set()
         return JSONResponse({}, status_code=200)
 
     def _check_setup_result() -> Any:
         if app.state.setup_result is None:
             return
 
         if not app.state.setup_result.ready():
```

## cog/server/probes.py

```diff
@@ -9,15 +9,15 @@
 
 
 class ProbeHelper:
 
     _root = Path("/var/run/cog")
     _enabled = False
 
-    def __init__(self, root: PathLike = None):
+    def __init__(self, root: PathLike = None) -> None:
         if "KUBERNETES_SERVICE_HOST" not in os.environ:
             log.info("Not running in Kubernetes: disabling probe helpers.")
             return
 
         if root is not None:
             self._root = Path(root)
```

## cog/server/runner.py

```diff
@@ -1,22 +1,21 @@
 import io
 import threading
 import traceback
 from datetime import datetime, timezone
 from multiprocessing.pool import AsyncResult, ThreadPool
-from typing import Any, Callable, Optional, Tuple
+from typing import Any, Callable, Dict, Optional, Tuple
 
 import requests
 import structlog
 from fastapi.encoders import jsonable_encoder
 from requests.adapters import HTTPAdapter
 from requests.packages.urllib3.util.retry import Retry  # type: ignore
 
-from .. import schema
-from .. import types
+from .. import schema, types
 from ..files import put_file_to_signed_endpoint
 from ..json import upload_files
 from .eventtypes import Done, Heartbeat, Log, PredictionOutput, PredictionOutputType
 from .probes import ProbeHelper
 from .webhook import webhook_caller_filtered
 from .worker import Worker
 
@@ -36,17 +35,17 @@
 
 
 class PredictionRunner:
     def __init__(
         self,
         *,
         predictor_ref: str,
-        shutdown_event: threading.Event,
+        shutdown_event: Optional[threading.Event],
         upload_url: Optional[str] = None,
-    ):
+    ) -> None:
         self._thread = None
         self._threadpool = ThreadPool(processes=1)
 
         self._response: Optional[schema.PredictionResponse] = None
         self._result: Optional[AsyncResult] = None
 
         self._worker = Worker(predictor_ref=predictor_ref)
@@ -63,15 +62,16 @@
             # Re-raise the exception in order to more easily capture exc_info,
             # and then trigger shutdown, as we have no easy way to resume
             # worker state if an exception was thrown.
             try:
                 raise error
             except Exception:
                 log.error("caught exception while running setup", exc_info=True)
-                self._shutdown_event.set()
+                if self._shutdown_event is not None:
+                    self._shutdown_event.set()
 
         self._result = self._threadpool.apply_async(
             func=setup,
             kwds={"worker": self._worker},
             error_callback=handle_error,
         )
         return self._result
@@ -109,15 +109,16 @@
             # Re-raise the exception in order to more easily capture exc_info,
             # and then trigger shutdown, as we have no easy way to resume
             # worker state if an exception was thrown.
             try:
                 raise error
             except Exception:
                 log.error("caught exception while running prediction", exc_info=True)
-                self._shutdown_event.set()
+                if self._shutdown_event is not None:
+                    self._shutdown_event.set()
 
         self._response = event_handler.response
         self._result = self._threadpool.apply_async(
             func=predict,
             kwds={
                 "worker": self._worker,
                 "request": prediction,
@@ -194,15 +195,15 @@
 
 class PredictionEventHandler:
     def __init__(
         self,
         p: schema.PredictionResponse,
         webhook_sender: Optional[Callable] = None,
         file_uploader: Optional[Callable] = None,
-    ):
+    ) -> None:
         log.info("starting prediction")
         self.p = p
         self.p.status = schema.Status.PROCESSING
         self.p.output = None
         self.p.logs = ""
         self.p.started_at = datetime.now(tz=timezone.utc)
 
@@ -278,15 +279,15 @@
         except Exception as error:
             # If something goes wrong uploading a file, it's irrecoverable.
             # The re-raised exception will be caught and cause the prediction
             # to be failed, with a useful error message.
             raise FileUploadError("Got error trying to upload output files") from error
 
 
-def setup(*, worker: Worker):
+def setup(*, worker: Worker) -> Dict[str, Any]:
     logs = []
     status = None
     started_at = datetime.now(tz=timezone.utc)
 
     try:
         for event in worker.setup():
             if isinstance(event, Log):
@@ -321,15 +322,14 @@
 def predict(
     *,
     worker: Worker,
     request: schema.PredictionRequest,
     event_handler: PredictionEventHandler,
     should_cancel: threading.Event,
 ) -> schema.PredictionResponse:
-
     # Set up logger context within prediction thread.
     structlog.contextvars.clear_contextvars()
     structlog.contextvars.bind_contextvars(prediction_id=request.id)
 
     try:
         return _predict(
             worker=worker,
```

## cog/server/worker.py

```diff
@@ -5,15 +5,15 @@
 import traceback
 import types
 from enum import Enum, auto, unique
 from multiprocessing.connection import Connection
 from typing import Any, Dict, Iterable, Optional, TextIO, Union
 
 from ..json import make_encodeable
-from ..predictor import BasePredictor, load_predictor_from_ref, get_predict, run_setup
+from ..predictor import BasePredictor, get_predict, load_predictor_from_ref, run_setup
 from .eventtypes import (
     Done,
     Heartbeat,
     Log,
     PredictionInput,
     PredictionOutput,
     PredictionOutputType,
@@ -37,15 +37,15 @@
     STARTING = auto()
     READY = auto()
     PROCESSING = auto()
     DEFUNCT = auto()
 
 
 class Worker:
-    def __init__(self, predictor_ref: str, tee_output: bool = True):
+    def __init__(self, predictor_ref: str, tee_output: bool = True) -> None:
         self._state = WorkerState.NEW
         self._allow_cancel = False
 
         # A pipe with which to communicate with the child worker.
         self._events, child_events = _spawn.Pipe()
         self._child = _ChildWorker(predictor_ref, child_events, tee_output)
         self._terminating = False
@@ -139,15 +139,15 @@
 
 class _ChildWorker(_spawn.Process):  # type: ignore
     def __init__(
         self,
         predictor_ref: str,
         events: Connection,
         tee_output: bool = True,
-    ):
+    ) -> None:
         self._predictor_ref = predictor_ref
         self._predictor: Optional[BasePredictor] = None
         self._events = events
         self._tee_output = tee_output
         self._cancelable = False
 
         super().__init__()
```

## Comparing `cog-0.8.0b1.dist-info/LICENSE` & `cog-0.8.0b2.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `cog-0.8.0b1.dist-info/METADATA` & `cog-0.8.0b2.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: cog
-Version: 0.8.0b1
+Version: 0.8.0b2
 Summary: Containers for machine learning
 Author-email: Replicate <team@replicate.com>
 License: 
                                          Apache License
                                    Version 2.0, January 2004
                                 http://www.apache.org/licenses/
         
@@ -214,14 +214,27 @@
 Requires-Dist: fastapi (<1,>=0.75.2)
 Requires-Dist: pydantic (<2,>=1.9)
 Requires-Dist: PyYAML
 Requires-Dist: requests (<3,>=2)
 Requires-Dist: structlog (<23,>=20)
 Requires-Dist: typing-extensions (>=4.1.0)
 Requires-Dist: uvicorn[standard] (<1,>=0.12)
+Provides-Extra: dev
+Requires-Dist: black ; extra == 'dev'
+Requires-Dist: build ; extra == 'dev'
+Requires-Dist: httpx ; extra == 'dev'
+Requires-Dist: hypothesis ; extra == 'dev'
+Requires-Dist: mypy ; extra == 'dev'
+Requires-Dist: numpy ; extra == 'dev'
+Requires-Dist: pillow ; extra == 'dev'
+Requires-Dist: pytest ; extra == 'dev'
+Requires-Dist: pytest-httpserver ; extra == 'dev'
+Requires-Dist: pytest-xdist ; extra == 'dev'
+Requires-Dist: responses ; extra == 'dev'
+Requires-Dist: ruff ; extra == 'dev'
 
 # Cog: Containers for machine learning
 
 Cog is an open-source tool that lets you package machine learning models in a standard, production-ready container.
 
 You can deploy your packaged model to your own infrastructure, or to [Replicate](https://replicate.com/).
```

