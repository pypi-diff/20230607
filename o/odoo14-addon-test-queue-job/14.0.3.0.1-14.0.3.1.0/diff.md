# Comparing `tmp/odoo14_addon_test_queue_job-14.0.3.0.1-py3-none-any.whl.zip` & `tmp/odoo14_addon_test_queue_job-14.0.3.1.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,28 +1,28 @@
-Zip file size: 35659 bytes, number of entries: 26
--rw-r--r--  2.0 unx     1860 b- defN 22-Oct-18 17:57 odoo/addons/test_queue_job/README.rst
--rw-r--r--  2.0 unx       21 b- defN 22-Oct-18 17:57 odoo/addons/test_queue_job/__init__.py
--rw-r--r--  2.0 unx      535 b- defN 22-Oct-18 17:57 odoo/addons/test_queue_job/__manifest__.py
--rw-r--r--  2.0 unx      369 b- defN 22-Oct-18 17:57 odoo/addons/test_queue_job/data/queue_job_channel_data.xml
--rw-r--r--  2.0 unx     2837 b- defN 22-Oct-18 17:57 odoo/addons/test_queue_job/data/queue_job_function_data.xml
--rw-r--r--  2.0 unx     3785 b- defN 22-Oct-18 17:57 odoo/addons/test_queue_job/i18n/test_queue_job.pot
--rw-r--r--  2.0 unx     4109 b- defN 22-Oct-18 17:57 odoo/addons/test_queue_job/i18n/zh_CN.po
--rw-r--r--  2.0 unx       26 b- defN 22-Oct-18 17:57 odoo/addons/test_queue_job/models/__init__.py
--rw-r--r--  2.0 unx     4703 b- defN 22-Oct-18 17:57 odoo/addons/test_queue_job/models/test_models.py
--rw-r--r--  2.0 unx      326 b- defN 22-Oct-18 17:57 odoo/addons/test_queue_job/security/ir.model.access.csv
--rw-r--r--  2.0 unx     9455 b- defN 22-Oct-18 17:57 odoo/addons/test_queue_job/static/description/icon.png
--rw-r--r--  2.0 unx      246 b- defN 22-Oct-18 17:57 odoo/addons/test_queue_job/tests/__init__.py
--rw-r--r--  2.0 unx      641 b- defN 22-Oct-18 17:57 odoo/addons/test_queue_job/tests/common.py
--rw-r--r--  2.0 unx     2242 b- defN 22-Oct-18 17:57 odoo/addons/test_queue_job/tests/test_autovacuum.py
--rw-r--r--  2.0 unx     8303 b- defN 22-Oct-18 17:57 odoo/addons/test_queue_job/tests/test_delay_mocks.py
--rw-r--r--  2.0 unx     9911 b- defN 22-Oct-18 17:57 odoo/addons/test_queue_job/tests/test_delayable.py
--rw-r--r--  2.0 unx    10133 b- defN 22-Oct-18 17:57 odoo/addons/test_queue_job/tests/test_dependencies.py
--rw-r--r--  2.0 unx    31295 b- defN 22-Oct-18 17:57 odoo/addons/test_queue_job/tests/test_job.py
--rw-r--r--  2.0 unx     2025 b- defN 22-Oct-18 17:57 odoo/addons/test_queue_job/tests/test_job_auto_delay.py
--rw-r--r--  2.0 unx     3507 b- defN 22-Oct-18 17:57 odoo/addons/test_queue_job/tests/test_job_channels.py
--rw-r--r--  2.0 unx     1397 b- defN 22-Oct-18 17:57 odoo/addons/test_queue_job/tests/test_json_field.py
--rw-r--r--  2.0 unx     4165 b- defN 22-Oct-18 17:57 odoo/addons/test_queue_job/tests/test_related_actions.py
--rw-r--r--  2.0 unx     2427 b- defN 22-Oct-18 17:57 odoo14_addon_test_queue_job-14.0.3.0.1.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 22-Oct-18 17:57 odoo14_addon_test_queue_job-14.0.3.0.1.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 22-Oct-18 17:57 odoo14_addon_test_queue_job-14.0.3.0.1.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2721 b- defN 22-Oct-18 17:57 odoo14_addon_test_queue_job-14.0.3.0.1.dist-info/RECORD
-26 files, 107136 bytes uncompressed, 31051 bytes compressed:  71.0%
+Zip file size: 36158 bytes, number of entries: 26
+-rw-r--r--  2.0 unx     1860 b- defN 23-Jun-07 13:54 odoo/addons/test_queue_job/README.rst
+-rw-r--r--  2.0 unx       21 b- defN 23-Jun-07 13:54 odoo/addons/test_queue_job/__init__.py
+-rw-r--r--  2.0 unx      535 b- defN 23-Jun-07 13:54 odoo/addons/test_queue_job/__manifest__.py
+-rw-r--r--  2.0 unx      369 b- defN 23-Jun-07 13:54 odoo/addons/test_queue_job/data/queue_job_channel_data.xml
+-rw-r--r--  2.0 unx     2837 b- defN 23-Jun-07 13:54 odoo/addons/test_queue_job/data/queue_job_function_data.xml
+-rw-r--r--  2.0 unx     3785 b- defN 23-Jun-07 13:54 odoo/addons/test_queue_job/i18n/test_queue_job.pot
+-rw-r--r--  2.0 unx     4109 b- defN 23-Jun-07 13:54 odoo/addons/test_queue_job/i18n/zh_CN.po
+-rw-r--r--  2.0 unx       26 b- defN 23-Jun-07 13:54 odoo/addons/test_queue_job/models/__init__.py
+-rw-r--r--  2.0 unx     4703 b- defN 23-Jun-07 13:54 odoo/addons/test_queue_job/models/test_models.py
+-rw-r--r--  2.0 unx      326 b- defN 23-Jun-07 13:54 odoo/addons/test_queue_job/security/ir.model.access.csv
+-rw-r--r--  2.0 unx     9455 b- defN 23-Jun-07 13:54 odoo/addons/test_queue_job/static/description/icon.png
+-rw-r--r--  2.0 unx      246 b- defN 23-Jun-07 13:54 odoo/addons/test_queue_job/tests/__init__.py
+-rw-r--r--  2.0 unx      641 b- defN 23-Jun-07 13:54 odoo/addons/test_queue_job/tests/common.py
+-rw-r--r--  2.0 unx     2242 b- defN 23-Jun-07 13:54 odoo/addons/test_queue_job/tests/test_autovacuum.py
+-rw-r--r--  2.0 unx    13996 b- defN 23-Jun-07 13:54 odoo/addons/test_queue_job/tests/test_delay_mocks.py
+-rw-r--r--  2.0 unx     9911 b- defN 23-Jun-07 13:54 odoo/addons/test_queue_job/tests/test_delayable.py
+-rw-r--r--  2.0 unx    10133 b- defN 23-Jun-07 13:54 odoo/addons/test_queue_job/tests/test_dependencies.py
+-rw-r--r--  2.0 unx    31295 b- defN 23-Jun-07 13:54 odoo/addons/test_queue_job/tests/test_job.py
+-rw-r--r--  2.0 unx     2025 b- defN 23-Jun-07 13:54 odoo/addons/test_queue_job/tests/test_job_auto_delay.py
+-rw-r--r--  2.0 unx     3507 b- defN 23-Jun-07 13:54 odoo/addons/test_queue_job/tests/test_job_channels.py
+-rw-r--r--  2.0 unx     1397 b- defN 23-Jun-07 13:54 odoo/addons/test_queue_job/tests/test_json_field.py
+-rw-r--r--  2.0 unx     4165 b- defN 23-Jun-07 13:54 odoo/addons/test_queue_job/tests/test_related_actions.py
+-rw-r--r--  2.0 unx     2427 b- defN 23-Jun-07 13:54 odoo14_addon_test_queue_job-14.0.3.1.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jun-07 13:54 odoo14_addon_test_queue_job-14.0.3.1.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jun-07 13:54 odoo14_addon_test_queue_job-14.0.3.1.0.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     2722 b- defN 23-Jun-07 13:54 odoo14_addon_test_queue_job-14.0.3.1.0.dist-info/RECORD
+26 files, 112830 bytes uncompressed, 31550 bytes compressed:  72.0%
```

## zipnote {}

```diff
@@ -60,20 +60,20 @@
 
 Filename: odoo/addons/test_queue_job/tests/test_json_field.py
 Comment: 
 
 Filename: odoo/addons/test_queue_job/tests/test_related_actions.py
 Comment: 
 
-Filename: odoo14_addon_test_queue_job-14.0.3.0.1.dist-info/METADATA
+Filename: odoo14_addon_test_queue_job-14.0.3.1.0.dist-info/METADATA
 Comment: 
 
-Filename: odoo14_addon_test_queue_job-14.0.3.0.1.dist-info/WHEEL
+Filename: odoo14_addon_test_queue_job-14.0.3.1.0.dist-info/WHEEL
 Comment: 
 
-Filename: odoo14_addon_test_queue_job-14.0.3.0.1.dist-info/top_level.txt
+Filename: odoo14_addon_test_queue_job-14.0.3.1.0.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo14_addon_test_queue_job-14.0.3.0.1.dist-info/RECORD
+Filename: odoo14_addon_test_queue_job-14.0.3.1.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/test_queue_job/__manifest__.py

```diff
@@ -1,13 +1,13 @@
 # Copyright 2016 Camptocamp SA
 # License LGPL-3.0 or later (http://www.gnu.org/licenses/lgpl.html)
 
 {
     "name": "Queue Job Tests",
-    "version": "14.0.3.0.1",
+    "version": "14.0.3.1.0",
     "author": "Camptocamp,Odoo Community Association (OCA)",
     "license": "LGPL-3",
     "category": "Generic Modules",
     "depends": ["queue_job"],
     "website": "https://github.com/OCA/queue",
     "data": [
         "data/queue_job_channel_data.xml",
```

## odoo/addons/test_queue_job/tests/test_delay_mocks.py

```diff
@@ -9,15 +9,15 @@
 
 from odoo.addons.queue_job.delay import Delayable
 from odoo.addons.queue_job.job import identity_exact
 from odoo.addons.queue_job.tests.common import mock_with_delay, trap_jobs
 
 
 class TestDelayMocks(common.SavepointCase):
-    def test_trap_jobs_on_with_delay(self):
+    def test_trap_jobs_on_with_delay_model(self):
         with trap_jobs() as trap:
             self.env["test.queue.job"].button_that_uses_with_delay()
             trap.assert_jobs_count(1)
             trap.assert_jobs_count(1, only=self.env["test.queue.job"].testing_method)
 
             trap.assert_enqueued_job(
                 self.env["test.queue.job"].testing_method,
@@ -29,14 +29,141 @@
                     eta=15,
                     identity_key=identity_exact,
                     max_retries=1,
                     priority=15,
                 ),
             )
 
+    def test_trap_jobs_on_with_delay_recordset(self):
+        recordset = self.env["test.queue.job"].create({"name": "test"})
+        with trap_jobs() as trap:
+            recordset.button_that_uses_with_delay()
+            trap.assert_jobs_count(1)
+            trap.assert_jobs_count(1, only=recordset.testing_method)
+
+            trap.assert_enqueued_job(
+                recordset.testing_method,
+                args=(1,),
+                kwargs={"foo": 2},
+                properties=dict(
+                    channel="root.test",
+                    description="Test",
+                    eta=15,
+                    identity_key=identity_exact,
+                    max_retries=1,
+                    priority=15,
+                ),
+            )
+
+    def test_trap_jobs_on_with_delay_recordset_no_properties(self):
+        """Verify that trap_jobs() can omit properties"""
+        recordset = self.env["test.queue.job"].create({"name": "test"})
+        with trap_jobs() as trap:
+            recordset.button_that_uses_with_delay()
+
+            trap.assert_enqueued_job(
+                recordset.testing_method,
+                args=(1,),
+                kwargs={"foo": 2},
+            )
+
+    def test_trap_jobs_on_with_delay_recordset_partial_properties(self):
+        """Verify that trap_jobs() can check partially properties"""
+        recordset = self.env["test.queue.job"].create({"name": "test"})
+        with trap_jobs() as trap:
+            recordset.button_that_uses_with_delay()
+
+            trap.assert_enqueued_job(
+                recordset.testing_method,
+                args=(1,),
+                kwargs={"foo": 2},
+                properties=dict(
+                    description="Test",
+                    eta=15,
+                ),
+            )
+
+    def test_trap_jobs_on_with_delay_assert_model_count_mismatch(self):
+        recordset = self.env["test.queue.job"].create({"name": "test"})
+        with trap_jobs() as trap:
+            self.env["test.queue.job"].button_that_uses_with_delay()
+            trap.assert_jobs_count(1)
+            with self.assertRaises(AssertionError, msg="0 != 1"):
+                trap.assert_jobs_count(1, only=recordset.testing_method)
+
+    def test_trap_jobs_on_with_delay_assert_recordset_count_mismatch(self):
+        recordset = self.env["test.queue.job"].create({"name": "test"})
+        with trap_jobs() as trap:
+            recordset.button_that_uses_with_delay()
+            trap.assert_jobs_count(1)
+            with self.assertRaises(AssertionError, msg="0 != 1"):
+                trap.assert_jobs_count(
+                    1, only=self.env["test.queue.job"].testing_method
+                )
+
+    def test_trap_jobs_on_with_delay_assert_model_enqueued_mismatch(self):
+        recordset = self.env["test.queue.job"].create({"name": "test"})
+        with trap_jobs() as trap:
+            recordset.button_that_uses_with_delay()
+            trap.assert_jobs_count(1)
+            message = (
+                r"Job <test\.queue.job\(\)>\.testing_method\(1, foo=2\) with "
+                r"properties \(channel=root\.test, description=Test, eta=15, "
+                "identity_key=<function identity_exact at 0x[0-9a-fA-F]+>, "
+                "max_retries=1, priority=15\\) was not enqueued\\.\n"
+                "Actual enqueued jobs:\n"
+                r" \* <test.queue.job\(%s,\)>.testing_method\(1, foo=2\) with properties "
+                r"\(priority=15, max_retries=1, eta=15, description=Test, channel=root.test, "
+                r"identity_key=<function identity_exact at 0x[0-9a-fA-F]+>\)"
+            ) % (recordset.id,)
+            with self.assertRaisesRegex(AssertionError, message):
+                trap.assert_enqueued_job(
+                    self.env["test.queue.job"].testing_method,
+                    args=(1,),
+                    kwargs={"foo": 2},
+                    properties=dict(
+                        channel="root.test",
+                        description="Test",
+                        eta=15,
+                        identity_key=identity_exact,
+                        max_retries=1,
+                        priority=15,
+                    ),
+                )
+
+    def test_trap_jobs_on_with_delay_assert_recordset_enqueued_mismatch(self):
+        recordset = self.env["test.queue.job"].create({"name": "test"})
+        with trap_jobs() as trap:
+            self.env["test.queue.job"].button_that_uses_with_delay()
+            trap.assert_jobs_count(1)
+            message = (
+                r"Job <test\.queue.job\(%s,\)>\.testing_method\(1, foo=2\) with "
+                r"properties \(channel=root\.test, description=Test, eta=15, "
+                "identity_key=<function identity_exact at 0x[0-9a-fA-F]+>, "
+                "max_retries=1, priority=15\\) was not enqueued\\.\n"
+                "Actual enqueued jobs:\n"
+                r" \* <test.queue.job\(\)>.testing_method\(1, foo=2\) with properties "
+                r"\(priority=15, max_retries=1, eta=15, description=Test, channel=root.test, "
+                r"identity_key=<function identity_exact at 0x[0-9a-fA-F]+>\)"
+            ) % (recordset.id,)
+            with self.assertRaisesRegex(AssertionError, message):
+                trap.assert_enqueued_job(
+                    recordset.testing_method,
+                    args=(1,),
+                    kwargs={"foo": 2},
+                    properties=dict(
+                        channel="root.test",
+                        description="Test",
+                        eta=15,
+                        identity_key=identity_exact,
+                        max_retries=1,
+                        priority=15,
+                    ),
+                )
+
     def test_trap_jobs_on_graph(self):
         with trap_jobs() as trap:
             self.env["test.queue.job"].button_that_uses_delayable_chain()
             trap.assert_jobs_count(3)
             trap.assert_jobs_count(2, only=self.env["test.queue.job"].testing_method)
             trap.assert_jobs_count(1, only=self.env["test.queue.job"].no_description)
```

## Comparing `odoo14_addon_test_queue_job-14.0.3.0.1.dist-info/METADATA` & `odoo14_addon_test_queue_job-14.0.3.1.0.dist-info/METADATA`

 * *Files 5% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo14-addon-test-queue-job
-Version: 14.0.3.0.1
+Version: 14.0.3.1.0
 Summary: Queue Job Tests
 Home-page: https://github.com/OCA/queue
 Author: Camptocamp,Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: LGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
```

## Comparing `odoo14_addon_test_queue_job-14.0.3.0.1.dist-info/RECORD` & `odoo14_addon_test_queue_job-14.0.3.1.0.dist-info/RECORD`

 * *Files 10% similar despite different names*

```diff
@@ -1,26 +1,26 @@
 odoo/addons/test_queue_job/README.rst,sha256=6RXiyqDTBWb-vuNWjDyI-_NwSTQR-90u6mzaUSieck8,1860
 odoo/addons/test_queue_job/__init__.py,sha256=X9EJGOE2GtZbS0G82PtSXmWSZ_R8jEM0rlJTDliQjp4,21
-odoo/addons/test_queue_job/__manifest__.py,sha256=TY0Vt8X-qrxw62jcdDydcSJdm3hCGc7-nzpeqqb5pfg,535
+odoo/addons/test_queue_job/__manifest__.py,sha256=yAh4OOjWCFXOccp5GZ4RVVLdbw-W72xizXhtnCrrXL0,535
 odoo/addons/test_queue_job/data/queue_job_channel_data.xml,sha256=7QS--R-OZs7VSNUROMTtb82UZM_WHgfWFcVdpUDhiaA,369
 odoo/addons/test_queue_job/data/queue_job_function_data.xml,sha256=K-NESFOZ7Ce-I8NPxT12-v_lQRyLc3laASdoQCdFmmU,2837
 odoo/addons/test_queue_job/i18n/test_queue_job.pot,sha256=OSvGcMJicbhGH2VtGwfZ63qXBwxoyf5vRpBqQqjYAQ0,3785
 odoo/addons/test_queue_job/i18n/zh_CN.po,sha256=RcBwJFRlbHzVnZfBtWGA-VSOTsAfMjd3wa2pPbtGISk,4109
 odoo/addons/test_queue_job/models/__init__.py,sha256=VtVI4iJ0Fw5vqWYTBGqUejsHwCOhHvrtIXnpO9vuqTI,26
 odoo/addons/test_queue_job/models/test_models.py,sha256=TOr_40i8MSReIm2f2cXAwdIN8EdYRhpZAZCADsvl-cw,4703
 odoo/addons/test_queue_job/security/ir.model.access.csv,sha256=mqnWa1DiQBqA-WHvUqZtMfU-IdT-sybwt1nyABc_Y4k,326
 odoo/addons/test_queue_job/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
 odoo/addons/test_queue_job/tests/__init__.py,sha256=bsCoECiP-0yBaQg8zMd5wLANciRniMBkmSKq_qASW14,246
 odoo/addons/test_queue_job/tests/common.py,sha256=tbuclyb82bQbvkZRDPIqrZXeIdaOTiqHFdbjuKAm9tI,641
 odoo/addons/test_queue_job/tests/test_autovacuum.py,sha256=f8FbRPG0nFz_0KPmfr9_Hw-gMk7AYxpCI8vv-49rORI,2242
-odoo/addons/test_queue_job/tests/test_delay_mocks.py,sha256=_2fnRhVCYRKQJ3X-LuPtA_7b3LnkGrxK47GGFvMTPhs,8303
+odoo/addons/test_queue_job/tests/test_delay_mocks.py,sha256=Lu-w4BIl3ExNCML0DzplRiHvmNUjEwQCycfD5a4WB3s,13996
 odoo/addons/test_queue_job/tests/test_delayable.py,sha256=iAfXUjBlC5xbELRHMlel_z0oyseuYhtkqnssK7Elt-w,9911
 odoo/addons/test_queue_job/tests/test_dependencies.py,sha256=pTsFIdKTmdN9g0ww-Fl9_DpC_vanXTXBLlMSvv5kOx4,10133
 odoo/addons/test_queue_job/tests/test_job.py,sha256=ZUQC_kGq2X2x7MgA9hAg30uCArRu6W-BVnVYWNvW41k,31295
 odoo/addons/test_queue_job/tests/test_job_auto_delay.py,sha256=aj4Ix--9mM-D7RzM7JnPWBtDH6A57HywMcroZOAZtIc,2025
 odoo/addons/test_queue_job/tests/test_job_channels.py,sha256=1AEP-eJyCcwoO7YoQUTsPS_6347hFv5jys9TcWCiPcM,3507
 odoo/addons/test_queue_job/tests/test_json_field.py,sha256=ePvvP7LWnAzRzKPpRab4hmddTzhw0gcWe91vymfMJ88,1397
 odoo/addons/test_queue_job/tests/test_related_actions.py,sha256=xRYgPFTsgDBqFhub-54nZQ_HkFo6ZBXbOBX9Pp5rKvE,4165
-odoo14_addon_test_queue_job-14.0.3.0.1.dist-info/METADATA,sha256=8q-rdvGlBgU3_a6XMU-39964KuVQH3PV5eOBqM0y5IU,2427
-odoo14_addon_test_queue_job-14.0.3.0.1.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-odoo14_addon_test_queue_job-14.0.3.0.1.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo14_addon_test_queue_job-14.0.3.0.1.dist-info/RECORD,,
+odoo14_addon_test_queue_job-14.0.3.1.0.dist-info/METADATA,sha256=NKCLrwWOcfV2OmXLD0AjCCrz1xBmAD_t_XXULBA1cYI,2427
+odoo14_addon_test_queue_job-14.0.3.1.0.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+odoo14_addon_test_queue_job-14.0.3.1.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo14_addon_test_queue_job-14.0.3.1.0.dist-info/RECORD,,
```

