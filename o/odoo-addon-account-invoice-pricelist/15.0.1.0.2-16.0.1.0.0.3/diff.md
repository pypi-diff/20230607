# Comparing `tmp/odoo_addon_account_invoice_pricelist-15.0.1.0.2-py3-none-any.whl.zip` & `tmp/odoo_addon_account_invoice_pricelist-16.0.1.0.0.3-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,71 +1,69 @@
-Zip file size: 117428 bytes, number of entries: 69
--rw-r--r--  2.0 unx     3469 b- defN 23-May-19 09:25 odoo/addons/account_invoice_pricelist/README.rst
--rw-r--r--  2.0 unx       21 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/__init__.py
--rw-r--r--  2.0 unx      505 b- defN 23-May-19 09:25 odoo/addons/account_invoice_pricelist/__manifest__.py
--rw-r--r--  2.0 unx     1694 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/account_invoice_pricelist.pot
--rw-r--r--  2.0 unx     2185 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/ar.po
--rw-r--r--  2.0 unx     2045 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/bg.po
--rw-r--r--  2.0 unx     2165 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/bs.po
--rw-r--r--  2.0 unx     2203 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/ca.po
--rw-r--r--  2.0 unx     2114 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/cs.po
--rw-r--r--  2.0 unx     2185 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/de.po
--rw-r--r--  2.0 unx     2060 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/el_GR.po
--rw-r--r--  2.0 unx     2112 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/en_GB.po
--rw-r--r--  2.0 unx     2292 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/es.po
--rw-r--r--  2.0 unx     2037 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/es_CL.po
--rw-r--r--  2.0 unx     2113 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/es_CR.po
--rw-r--r--  2.0 unx     2111 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/es_EC.po
--rw-r--r--  2.0 unx     2109 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/es_MX.po
--rw-r--r--  2.0 unx     2052 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/es_PE.po
--rw-r--r--  2.0 unx     2081 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/et.po
--rw-r--r--  2.0 unx     2034 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/fi.po
--rw-r--r--  2.0 unx     2196 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/fr.po
--rw-r--r--  2.0 unx     2052 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/fr_CA.po
--rw-r--r--  2.0 unx     2111 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/fr_CH.po
--rw-r--r--  2.0 unx     2037 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/gl.po
--rw-r--r--  2.0 unx     2228 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/hr.po
--rw-r--r--  2.0 unx     2199 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/hr_HR.po
--rw-r--r--  2.0 unx     2086 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/hu.po
--rw-r--r--  2.0 unx     2031 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/id.po
--rw-r--r--  2.0 unx     2101 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/it.po
--rw-r--r--  2.0 unx     2079 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/ja.po
--rw-r--r--  2.0 unx     2182 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/lt.po
--rw-r--r--  2.0 unx     2146 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/mk.po
--rw-r--r--  2.0 unx     2118 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/mn.po
--rw-r--r--  2.0 unx     2099 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/nb.po
--rw-r--r--  2.0 unx     2067 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/nb_NO.po
--rw-r--r--  2.0 unx     2084 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/nl.po
--rw-r--r--  2.0 unx     2102 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/nl_BE.po
--rw-r--r--  2.0 unx     2093 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/nl_NL.po
--rw-r--r--  2.0 unx     2188 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/pl.po
--rw-r--r--  2.0 unx     2091 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/pt.po
--rw-r--r--  2.0 unx     2277 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/pt_BR.po
--rw-r--r--  2.0 unx     2111 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/pt_PT.po
--rw-r--r--  2.0 unx     2132 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/ro.po
--rw-r--r--  2.0 unx     2244 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/ru.po
--rw-r--r--  2.0 unx     2083 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/sk_SK.po
--rw-r--r--  2.0 unx     2164 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/sl.po
--rw-r--r--  2.0 unx     2084 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/sv.po
--rw-r--r--  2.0 unx     2049 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/th.po
--rw-r--r--  2.0 unx     2188 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/tr.po
--rw-r--r--  2.0 unx     2158 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/tr_TR.po
--rw-r--r--  2.0 unx     2095 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/zh_CN.po
--rw-r--r--  2.0 unx     2096 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/i18n/zh_TW.po
--rw-r--r--  2.0 unx     1444 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/l10n/account_invoice_pricelist.pot
--rw-r--r--  2.0 unx     1802 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/l10n/fr.po
--rw-r--r--  2.0 unx       92 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/models/__init__.py
--rw-r--r--  2.0 unx     9564 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/models/account_move.py
--rw-r--r--  2.0 unx      311 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      396 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx     9455 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/static/description/icon.png
--rw-r--r--  2.0 unx    13444 b- defN 23-May-19 09:25 odoo/addons/account_invoice_pricelist/static/description/index.html
--rw-r--r--  2.0 unx     5089 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/static/src/description/icon.png
--rw-r--r--  2.0 unx    39211 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/static/src/description/screenshot_group_by.png
--rw-r--r--  2.0 unx      107 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/tests/__init__.py
--rw-r--r--  2.0 unx    13431 b- defN 23-May-19 09:25 odoo/addons/account_invoice_pricelist/tests/test_account_move_pricelist.py
--rw-r--r--  2.0 unx     2263 b- defN 23-May-19 09:24 odoo/addons/account_invoice_pricelist/views/account_invoice_view.xml
--rw-r--r--  2.0 unx     4041 b- defN 23-May-19 09:26 odoo_addon_account_invoice_pricelist-15.0.1.0.2.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-May-19 09:26 odoo_addon_account_invoice_pricelist-15.0.1.0.2.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-May-19 09:26 odoo_addon_account_invoice_pricelist-15.0.1.0.2.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     7555 b- defN 23-May-19 09:26 odoo_addon_account_invoice_pricelist-15.0.1.0.2.dist-info/RECORD
-69 files, 215860 bytes uncompressed, 104790 bytes compressed:  51.5%
+Zip file size: 114835 bytes, number of entries: 67
+-rw-r--r--  2.0 unx     3469 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/README.rst
+-rw-r--r--  2.0 unx       21 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/__init__.py
+-rw-r--r--  2.0 unx      505 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/__manifest__.py
+-rw-r--r--  2.0 unx     1834 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/account_invoice_pricelist.pot
+-rw-r--r--  2.0 unx     2185 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/ar.po
+-rw-r--r--  2.0 unx     2045 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/bg.po
+-rw-r--r--  2.0 unx     2165 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/bs.po
+-rw-r--r--  2.0 unx     2203 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/ca.po
+-rw-r--r--  2.0 unx     2114 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/cs.po
+-rw-r--r--  2.0 unx     2185 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/de.po
+-rw-r--r--  2.0 unx     2060 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/el_GR.po
+-rw-r--r--  2.0 unx     2112 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/en_GB.po
+-rw-r--r--  2.0 unx     2292 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/es.po
+-rw-r--r--  2.0 unx     2037 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/es_CL.po
+-rw-r--r--  2.0 unx     2113 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/es_CR.po
+-rw-r--r--  2.0 unx     2111 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/es_EC.po
+-rw-r--r--  2.0 unx     2109 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/es_MX.po
+-rw-r--r--  2.0 unx     2052 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/es_PE.po
+-rw-r--r--  2.0 unx     2081 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/et.po
+-rw-r--r--  2.0 unx     2034 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/fi.po
+-rw-r--r--  2.0 unx     2196 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/fr.po
+-rw-r--r--  2.0 unx     2052 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/fr_CA.po
+-rw-r--r--  2.0 unx     2111 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/fr_CH.po
+-rw-r--r--  2.0 unx     2037 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/gl.po
+-rw-r--r--  2.0 unx     2228 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/hr.po
+-rw-r--r--  2.0 unx     2199 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/hr_HR.po
+-rw-r--r--  2.0 unx     2086 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/hu.po
+-rw-r--r--  2.0 unx     2031 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/id.po
+-rw-r--r--  2.0 unx     2101 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/it.po
+-rw-r--r--  2.0 unx     2079 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/ja.po
+-rw-r--r--  2.0 unx     2182 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/lt.po
+-rw-r--r--  2.0 unx     2146 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/mk.po
+-rw-r--r--  2.0 unx     2118 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/mn.po
+-rw-r--r--  2.0 unx     2099 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/nb.po
+-rw-r--r--  2.0 unx     2067 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/nb_NO.po
+-rw-r--r--  2.0 unx     2084 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/nl.po
+-rw-r--r--  2.0 unx     2102 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/nl_BE.po
+-rw-r--r--  2.0 unx     2093 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/nl_NL.po
+-rw-r--r--  2.0 unx     2188 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/pl.po
+-rw-r--r--  2.0 unx     2091 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/pt.po
+-rw-r--r--  2.0 unx     2277 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/pt_BR.po
+-rw-r--r--  2.0 unx     2111 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/pt_PT.po
+-rw-r--r--  2.0 unx     2132 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/ro.po
+-rw-r--r--  2.0 unx     2244 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/ru.po
+-rw-r--r--  2.0 unx     2083 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/sk_SK.po
+-rw-r--r--  2.0 unx     2164 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/sl.po
+-rw-r--r--  2.0 unx     2084 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/sv.po
+-rw-r--r--  2.0 unx     2049 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/th.po
+-rw-r--r--  2.0 unx     2188 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/tr.po
+-rw-r--r--  2.0 unx     2158 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/tr_TR.po
+-rw-r--r--  2.0 unx     2095 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/zh_CN.po
+-rw-r--r--  2.0 unx     2096 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/i18n/zh_TW.po
+-rw-r--r--  2.0 unx       92 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/models/__init__.py
+-rw-r--r--  2.0 unx     4689 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/models/account_move.py
+-rw-r--r--  2.0 unx      311 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      396 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx     9455 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/static/description/icon.png
+-rw-r--r--  2.0 unx    13444 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/static/description/index.html
+-rw-r--r--  2.0 unx     5089 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/static/src/description/icon.png
+-rw-r--r--  2.0 unx    39211 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/static/src/description/screenshot_group_by.png
+-rw-r--r--  2.0 unx      107 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/tests/__init__.py
+-rw-r--r--  2.0 unx    12675 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/tests/test_account_move_pricelist.py
+-rw-r--r--  2.0 unx     3061 b- defN 23-Jun-07 11:47 odoo/addons/account_invoice_pricelist/views/account_invoice_view.xml
+-rw-r--r--  2.0 unx     4044 b- defN 23-Jun-07 11:47 odoo_addon_account_invoice_pricelist-16.0.1.0.0.3.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jun-07 11:47 odoo_addon_account_invoice_pricelist-16.0.1.0.0.3.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jun-07 11:47 odoo_addon_account_invoice_pricelist-16.0.1.0.0.3.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     7329 b- defN 23-Jun-07 11:47 odoo_addon_account_invoice_pricelist-16.0.1.0.0.3.dist-info/RECORD
+67 files, 207698 bytes uncompressed, 102573 bytes compressed:  50.6%
```

## zipnote {}

```diff
@@ -150,20 +150,14 @@
 
 Filename: odoo/addons/account_invoice_pricelist/i18n/zh_CN.po
 Comment: 
 
 Filename: odoo/addons/account_invoice_pricelist/i18n/zh_TW.po
 Comment: 
 
-Filename: odoo/addons/account_invoice_pricelist/l10n/account_invoice_pricelist.pot
-Comment: 
-
-Filename: odoo/addons/account_invoice_pricelist/l10n/fr.po
-Comment: 
-
 Filename: odoo/addons/account_invoice_pricelist/models/__init__.py
 Comment: 
 
 Filename: odoo/addons/account_invoice_pricelist/models/account_move.py
 Comment: 
 
 Filename: odoo/addons/account_invoice_pricelist/readme/CONTRIBUTORS.rst
@@ -189,20 +183,20 @@
 
 Filename: odoo/addons/account_invoice_pricelist/tests/test_account_move_pricelist.py
 Comment: 
 
 Filename: odoo/addons/account_invoice_pricelist/views/account_invoice_view.xml
 Comment: 
 
-Filename: odoo_addon_account_invoice_pricelist-15.0.1.0.2.dist-info/METADATA
+Filename: odoo_addon_account_invoice_pricelist-16.0.1.0.0.3.dist-info/METADATA
 Comment: 
 
-Filename: odoo_addon_account_invoice_pricelist-15.0.1.0.2.dist-info/WHEEL
+Filename: odoo_addon_account_invoice_pricelist-16.0.1.0.0.3.dist-info/WHEEL
 Comment: 
 
-Filename: odoo_addon_account_invoice_pricelist-15.0.1.0.2.dist-info/top_level.txt
+Filename: odoo_addon_account_invoice_pricelist-16.0.1.0.0.3.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo_addon_account_invoice_pricelist-15.0.1.0.2.dist-info/RECORD
+Filename: odoo_addon_account_invoice_pricelist-16.0.1.0.0.3.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/account_invoice_pricelist/README.rst

```diff
@@ -10,31 +10,31 @@
 .. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
     :target: https://odoo-community.org/page/development-status
     :alt: Beta
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
     :alt: License: AGPL-3
 .. |badge3| image:: https://img.shields.io/badge/github-OCA%2Faccount--invoicing-lightgray.png?logo=github
-    :target: https://github.com/OCA/account-invoicing/tree/15.0/account_invoice_pricelist
+    :target: https://github.com/OCA/account-invoicing/tree/16.0/account_invoice_pricelist
     :alt: OCA/account-invoicing
 .. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
-    :target: https://translation.odoo-community.org/projects/account-invoicing-15-0/account-invoicing-15-0-account_invoice_pricelist
+    :target: https://translation.odoo-community.org/projects/account-invoicing-16-0/account-invoicing-16-0-account_invoice_pricelist
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runbot-Try%20me-875A7B.png
-    :target: https://runbot.odoo-community.org/runbot/95/15.0
+    :target: https://runbot.odoo-community.org/runbot/95/16.0
     :alt: Try me on Runbot
 
 |badge1| |badge2| |badge3| |badge4| |badge5| 
 
 * Add a stored field pricelist on invoices, related to the partner pricelist;
 * Use this pricelist when manually adding invoice lines;
 * Rules defined in pricelists applied in multicurrency context;
 * Possibility to group by pricelist on account.invoice view;
 
-.. image:: https://raw.githubusercontent.com/OCA/account-invoicing/15.0/account_invoice_pricelist/static/src/description/screenshot_group_by.png
+.. image:: https://raw.githubusercontent.com/OCA/account-invoicing/16.0/account_invoice_pricelist/static/src/description/screenshot_group_by.png
 
 For further information, please visit:
 
 * https://www.odoo.com/forum/help-1
 
 **Table of contents**
 
@@ -43,15 +43,15 @@
 
 Bug Tracker
 ===========
 
 Bugs are tracked on `GitHub Issues <https://github.com/OCA/account-invoicing/issues>`_.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us smashing it by providing a detailed and welcomed
-`feedback <https://github.com/OCA/account-invoicing/issues/new?body=module:%20account_invoice_pricelist%0Aversion:%2015.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
+`feedback <https://github.com/OCA/account-invoicing/issues/new?body=module:%20account_invoice_pricelist%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
 
 Do not contact contributors directly about support or help with technical issues.
 
 Credits
 =======
 
 Authors
@@ -81,10 +81,10 @@
    :alt: Odoo Community Association
    :target: https://odoo-community.org
 
 OCA, or the Odoo Community Association, is a nonprofit organization whose
 mission is to support the collaborative development of Odoo features and
 promote its widespread use.
 
-This module is part of the `OCA/account-invoicing <https://github.com/OCA/account-invoicing/tree/15.0/account_invoice_pricelist>`_ project on GitHub.
+This module is part of the `OCA/account-invoicing <https://github.com/OCA/account-invoicing/tree/16.0/account_invoice_pricelist>`_ project on GitHub.
 
 You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
```

## odoo/addons/account_invoice_pricelist/__manifest__.py

```diff
@@ -1,12 +1,12 @@
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
 
 {
     "name": "Account - Pricelist on Invoices",
-    "version": "15.0.1.0.2",
+    "version": "16.0.1.0.0",
     "summary": "Add partner pricelist on invoices",
     "category": "Accounting & Finance",
     "author": "GRAP," "Therp BV," "Tecnativa," "Odoo Community Association (OCA)",
     "website": "https://github.com/OCA/account-invoicing",
     "license": "AGPL-3",
     "depends": ["account"],
     "data": ["views/account_invoice_view.xml"],
```

## odoo/addons/account_invoice_pricelist/i18n/account_invoice_pricelist.pot

```diff
@@ -1,14 +1,14 @@
 # Translation of Odoo Server.
 # This file contains the translation of the following modules:
 # 	* account_invoice_pricelist
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: Odoo Server 15.0\n"
+"Project-Id-Version: Odoo Server 16.0\n"
 "Report-Msgid-Bugs-To: \n"
 "Last-Translator: \n"
 "Language-Team: \n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: \n"
 "Plural-Forms: \n"
@@ -23,25 +23,31 @@
 msgid "Journal Item"
 msgstr ""
 
 #. module: account_invoice_pricelist
 #: model:ir.model.fields,field_description:account_invoice_pricelist.field_account_bank_statement_line__pricelist_id
 #: model:ir.model.fields,field_description:account_invoice_pricelist.field_account_move__pricelist_id
 #: model:ir.model.fields,field_description:account_invoice_pricelist.field_account_payment__pricelist_id
-#: model_terms:ir.ui.view,arch_db:account_invoice_pricelist.account_invoice_filter_inherit_account_pricelist
+#: model_terms:ir.ui.view,arch_db:account_invoice_pricelist.view_account_invoice_filter
 msgid "Pricelist"
 msgstr ""
 
 #. module: account_invoice_pricelist
+#. odoo-python
 #: code:addons/account_invoice_pricelist/models/account_move.py:0
 #, python-format
 msgid "Pricelist and Invoice need to use the same currency."
 msgstr ""
 
 #. module: account_invoice_pricelist
+#: model:ir.ui.menu,name:account_invoice_pricelist.menu_product_pricelist_main
+msgid "Pricelists"
+msgstr ""
+
+#. module: account_invoice_pricelist
 #: model_terms:ir.ui.view,arch_db:account_invoice_pricelist.view_account_move_customer_form
 msgid "Update price in lines from the pricelist"
 msgstr ""
 
 #. module: account_invoice_pricelist
 #: model_terms:ir.ui.view,arch_db:account_invoice_pricelist.view_account_move_customer_form
 msgid "Update prices"
```

## odoo/addons/account_invoice_pricelist/models/account_move.py

```diff
@@ -1,226 +1,128 @@
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
 
 from odoo import _, api, fields, models
 from odoo.exceptions import UserError
+from odoo.tools import config
 
 
 class AccountMove(models.Model):
     _inherit = "account.move"
 
     pricelist_id = fields.Many2one(
         comodel_name="product.pricelist",
         string="Pricelist",
-        readonly=True,
         states={"draft": [("readonly", False)]},
+        compute="_compute_pricelist_id",
+        tracking=True,
+        store=True,
+        readonly=True,
+        precompute=True,
     )
 
     @api.constrains("pricelist_id", "currency_id")
     def _check_currency(self):
-        for sel in self.filtered(lambda a: a.pricelist_id and a.is_invoice()):
-            if sel.pricelist_id.currency_id != sel.currency_id:
-                raise UserError(
-                    _("Pricelist and Invoice need to use the same currency.")
-                )
+        if (
+            not config["test_enable"]
+            or (
+                config["test_enable"]
+                and self._context.get("force_check_currecy", False)
+            )
+        ) and self.filtered(
+            lambda a: a.pricelist_id
+            and a.is_sale_document()
+            and a.pricelist_id.currency_id != a.currency_id
+        ):
+            raise UserError(_("Pricelist and Invoice need to use the same currency."))
 
-    @api.onchange("partner_id", "company_id")
-    def _onchange_partner_id_account_invoice_pricelist(self):
-        if self.is_invoice():
+    @api.depends("partner_id", "company_id")
+    def _compute_pricelist_id(self):
+        for invoice in self:
             if (
-                self.partner_id
-                and self.move_type in ("out_invoice", "out_refund")
-                and self.partner_id.property_product_pricelist
+                invoice.partner_id
+                and invoice.is_sale_document()
+                and invoice.partner_id.property_product_pricelist
             ):
-                self.pricelist_id = self.partner_id.property_product_pricelist
-                self._set_pricelist_currency()
+                invoice.pricelist_id = invoice.partner_id.property_product_pricelist
 
-    @api.onchange("pricelist_id")
-    def _set_pricelist_currency(self):
-        if (
-            self.is_invoice()
-            and self.pricelist_id
-            and self.currency_id != self.pricelist_id.currency_id
-        ):
-            self.currency_id = self.pricelist_id.currency_id
+    @api.depends("pricelist_id")
+    def _compute_currency_id(self):
+        res = super()._compute_currency_id()
+        for invoice in self:
+            if (
+                invoice.is_sale_document()
+                and invoice.pricelist_id
+                and invoice.currency_id != invoice.pricelist_id.currency_id
+            ):
+                invoice.currency_id = self.pricelist_id.currency_id
+        return res
 
     def button_update_prices_from_pricelist(self):
-        for inv in self.filtered(lambda r: r.state == "draft"):
-            inv.invoice_line_ids._onchange_product_id_account_invoice_pricelist()
-        self.filtered(lambda r: r.state == "draft").with_context(
-            check_move_validity=False
-        )._move_autocomplete_invoice_lines_values()
-        self.filtered(lambda r: r.state == "draft").with_context(
-            check_move_validity=False
-        )._recompute_tax_lines()
-
-    def _reverse_move_vals(self, default_values, cancel=True):
-        move_vals = super(AccountMove, self)._reverse_move_vals(
-            default_values, cancel=cancel
-        )
-        if self.pricelist_id:
-            move_vals["pricelist_id"] = self.pricelist_id.id
-        return move_vals
+        self.filtered(
+            lambda r: r.state == "draft"
+        ).invoice_line_ids._compute_price_unit()
 
 
 class AccountMoveLine(models.Model):
     _inherit = "account.move.line"
 
-    @api.onchange("product_id", "quantity")
-    def _onchange_product_id_account_invoice_pricelist(self):
-        for sel in self:
-            if not sel.move_id.pricelist_id:
-                return
-            sel.with_context(check_move_validity=False).update(
-                {"price_unit": sel._get_price_with_pricelist()}
-            )
-
-    @api.onchange("product_uom_id")
-    def _onchange_uom_id(self):
-        if (
-            self.move_id.is_invoice()
-            and self.move_id.state == "draft"
-            and self.move_id.pricelist_id
-        ):
-            price_unit = self._get_computed_price_unit()
-            taxes = self._get_computed_taxes()
-            if taxes and self.move_id.fiscal_position_id:
-                price_subtotal = self._get_price_total_and_subtotal(
-                    price_unit=price_unit, taxes=taxes
-                )["price_subtotal"]
-                accounting_vals = self._get_fields_onchange_subtotal(
-                    price_subtotal=price_subtotal,
-                    currency=self.move_id.company_currency_id,
-                )
-                amount_currency = accounting_vals["amount_currency"]
-                price_unit = self._get_fields_onchange_balance(
-                    amount_currency=amount_currency
-                ).get("price_unit", price_unit)
-            self.with_context(check_move_validity=False).update(
-                {"price_unit": price_unit}
-            )
-            return
-        else:
-            return super(AccountMoveLine, self)._onchange_uom_id()
-
-    def _get_real_price_currency(self, product, rule_id, qty, uom, pricelist_id):
-        PricelistItem = self.env["product.pricelist.item"]
-        field_name = "lst_price"
-        currency_id = None
-        product_currency = product.currency_id
-        if rule_id:
-            pricelist_item = PricelistItem.browse(rule_id)
-            while (
-                pricelist_item.base == "pricelist"
-                and pricelist_item.base_pricelist_id
-                and pricelist_item.base_pricelist_id.discount_policy
-                == "without_discount"
-            ):
-                price, rule_id = pricelist_item.base_pricelist_id.with_context(
-                    uom=uom.id
-                ).get_product_price_rule(product, qty, self.move_id.partner_id)
-                pricelist_item = PricelistItem.browse(rule_id)
-
-            if pricelist_item.base == "standard_price":
-                field_name = "standard_price"
-                product_currency = product.cost_currency_id
-            elif (
-                pricelist_item.base == "pricelist" and pricelist_item.base_pricelist_id
-            ):
-                field_name = "price"
-                product = product.with_context(
-                    pricelist=pricelist_item.base_pricelist_id.id
-                )
-                product_currency = pricelist_item.base_pricelist_id.currency_id
-            currency_id = pricelist_item.pricelist_id.currency_id
-
-        if not currency_id:
-            currency_id = product_currency
-            cur_factor = 1.0
-        else:
-            if currency_id.id == product_currency.id:
-                cur_factor = 1.0
-            else:
-                cur_factor = currency_id._get_conversion_rate(
-                    product_currency,
-                    currency_id,
-                    self.company_id or self.env.company,
-                    self.move_id.invoice_date or fields.Date.today(),
-                )
-
-        product_uom = self.env.context.get("uom") or product.uom_id.id
-        if uom and uom.id != product_uom:
-            uom_factor = uom._compute_price(1.0, product.uom_id)
-        else:
-            uom_factor = 1.0
-
-        return product[field_name] * uom_factor * cur_factor, currency_id
+    @api.depends("quantity")
+    def _compute_price_unit(self):
+        res = super()._compute_price_unit()
+        for line in self:
+            if not line.move_id.pricelist_id:
+                continue
+            line.with_context(
+                check_move_validity=False
+            ).price_unit = line._get_price_with_pricelist()
+        return res
 
     def _calculate_discount(self, base_price, final_price):
         discount = (base_price - final_price) / base_price * 100
         if (discount < 0 and base_price > 0) or (discount > 0 and base_price < 0):
             discount = 0.0
         return discount
 
     def _get_price_with_pricelist(self):
         price_unit = 0.0
         if self.move_id.pricelist_id and self.product_id and self.move_id.is_invoice():
+            product = self.product_id
+            qty = self.quantity or 1.0
+            date = self.move_id.invoice_date or fields.Date.today()
+            uom = self.product_uom_id
+            (final_price, rule_id,) = self.move_id.pricelist_id._get_product_price_rule(
+                product,
+                qty,
+                uom=uom,
+                date=date,
+            )
             if self.move_id.pricelist_id.discount_policy == "with_discount":
-                product = self.product_id.with_context(
-                    lang=self.move_id.partner_id.lang,
-                    partner=self.move_id.partner_id.id,
-                    quantity=self.quantity,
-                    date_order=self.move_id.invoice_date,
-                    date=self.move_id.invoice_date,
-                    pricelist=self.move_id.pricelist_id.id,
-                    product_uom_id=self.product_uom_id.id,
-                    fiscal_position=(
-                        self.move_id.partner_id.property_account_position_id.id
-                    ),
-                )
-                tax_obj = self.env["account.tax"]
-                recalculated_price_unit = (
-                    product.price * self.product_id.uom_id.factor
-                ) / (self.product_uom_id.factor or 1.0)
-                price_unit = tax_obj._fix_tax_included_price_company(
-                    recalculated_price_unit,
+                price_unit = self.env["account.tax"]._fix_tax_included_price_company(
+                    final_price,
                     product.taxes_id,
                     self.tax_ids,
                     self.company_id,
                 )
                 self.with_context(check_move_validity=False).discount = 0.0
+                return price_unit
             else:
-                final_price, rule_id = self.move_id.pricelist_id.with_context(
-                    partner_id=self.move_id.partner_id.id,
-                    date=self.move_id.invoice_date or fields.Date.today(),
-                    uom=self.product_uom_id.id,
-                ).get_product_price_rule(
-                    self.product_id, self.quantity or 1.0, self.move_id.partner_id
-                )
-                base_price, currency = self.with_context(
-                    partner_id=self.move_id.partner_id.id,
-                    date=self.move_id.invoice_date or fields.Date.today(),
-                    uom=self.product_uom_id.id,
-                )._get_real_price_currency(
-                    self.product_id,
-                    rule_id,
-                    self.quantity,
-                    self.product_uom_id,
-                    self.move_id.pricelist_id.id,
-                )
-                if currency != self.move_id.pricelist_id.currency_id:
-                    base_price = currency._convert(
-                        base_price,
-                        self.move_id.pricelist_id.currency_id,
-                        self.move_id.company_id or self.env.company,
-                        self.move_id.invoice_date or fields.Date.today(),
+                rule_id = self.env["product.pricelist.item"].browse(rule_id)
+                while (
+                    rule_id.base == "pricelist"
+                    and rule_id.base_pricelist_id.discount_policy == "without_discount"
+                ):
+                    new_rule_id = rule_id.base_pricelist_id._get_product_rule(
+                        product, qty, uom=uom, date=date
                     )
+                    rule_id = self.env["product.pricelist.item"].browse(new_rule_id)
+                base_price = rule_id._compute_base_price(
+                    product,
+                    qty,
+                    uom,
+                    date,
+                    target_currency=self.currency_id,
+                )
                 price_unit = max(base_price, final_price)
                 self.with_context(
                     check_move_validity=False
                 ).discount = self._calculate_discount(base_price, final_price)
         return price_unit
-
-    def _get_computed_price_unit(self):
-        price_unit = super(AccountMoveLine, self)._get_computed_price_unit()
-        if self.move_id.pricelist_id and self.move_id.is_invoice():
-            price_unit = self._get_price_with_pricelist()
-        return price_unit
```

## odoo/addons/account_invoice_pricelist/static/description/index.html

### odoo/addons/account_invoice_pricelist/static/description/index.html

```diff
@@ -367,31 +367,31 @@
       <p>
         <a class="reference external" href="https://odoo-community.org/page/development-status">
           <img alt="Beta" src="https://img.shields.io/badge/maturity-Beta-yellow.png"/>
         </a>
         <a class="reference external" href="http://www.gnu.org/licenses/agpl-3.0-standalone.html">
           <img alt="License: AGPL-3" src="https://img.shields.io/badge/licence-AGPL--3-blue.png"/>
         </a>
-        <a class="reference external" href="https://github.com/OCA/account-invoicing/tree/15.0/account_invoice_pricelist">
+        <a class="reference external" href="https://github.com/OCA/account-invoicing/tree/16.0/account_invoice_pricelist">
           <img alt="OCA/account-invoicing" src="https://img.shields.io/badge/github-OCA%2Faccount--invoicing-lightgray.png?logo=github"/>
         </a>
-        <a class="reference external" href="https://translation.odoo-community.org/projects/account-invoicing-15-0/account-invoicing-15-0-account_invoice_pricelist">
+        <a class="reference external" href="https://translation.odoo-community.org/projects/account-invoicing-16-0/account-invoicing-16-0-account_invoice_pricelist">
           <img alt="Translate me on Weblate" src="https://img.shields.io/badge/weblate-Translate%20me-F47D42.png"/>
         </a>
-        <a class="reference external" href="https://runbot.odoo-community.org/runbot/95/15.0">
+        <a class="reference external" href="https://runbot.odoo-community.org/runbot/95/16.0">
           <img alt="Try me on Runbot" src="https://img.shields.io/badge/runbot-Try%20me-875A7B.png"/>
         </a>
       </p>
       <ul class="simple">
         <li>Add a stored field pricelist on invoices, related to the partner pricelist;</li>
         <li>Use this pricelist when manually adding invoice lines;</li>
         <li>Rules defined in pricelists applied in multicurrency context;</li>
         <li>Possibility to group by pricelist on account.invoice view;</li>
       </ul>
-      <img alt="https://raw.githubusercontent.com/OCA/account-invoicing/15.0/account_invoice_pricelist/static/src/description/screenshot_group_by.png" src="https://raw.githubusercontent.com/OCA/account-invoicing/15.0/account_invoice_pricelist/static/src/description/screenshot_group_by.png"/>
+      <img alt="https://raw.githubusercontent.com/OCA/account-invoicing/16.0/account_invoice_pricelist/static/src/description/screenshot_group_by.png" src="https://raw.githubusercontent.com/OCA/account-invoicing/16.0/account_invoice_pricelist/static/src/description/screenshot_group_by.png"/>
       <p>For further information, please visit:</p>
       <ul class="simple">
         <li>
           <a class="reference external" href="https://www.odoo.com/forum/help-1">https://www.odoo.com/forum/help-1</a>
         </li>
       </ul>
       <p>
@@ -424,15 +424,15 @@
         </h1>
         <p>
           Bugs are tracked on
           <a class="reference external" href="https://github.com/OCA/account-invoicing/issues">GitHub Issues</a>
           .
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us smashing it by providing a detailed and welcomed
-          <a class="reference external" href="https://github.com/OCA/account-invoicing/issues/new?body=module:%20account_invoice_pricelist%0Aversion:%2015.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>
+          <a class="reference external" href="https://github.com/OCA/account-invoicing/issues/new?body=module:%20account_invoice_pricelist%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>
           .
         </p>
         <p>Do not contact contributors directly about support or help with technical issues.</p>
       </div>
       <div class="section" id="credits">
         <h1>
           <a class="toc-backref" href="#id2">Credits</a>
@@ -498,15 +498,15 @@
             <img alt="Odoo Community Association" src="https://odoo-community.org/logo.png"/>
           </a>
           <p>OCA, or the Odoo Community Association, is a nonprofit organization whose
 mission is to support the collaborative development of Odoo features and
 promote its widespread use.</p>
           <p>
             This module is part of the
-            <a class="reference external" href="https://github.com/OCA/account-invoicing/tree/15.0/account_invoice_pricelist">OCA/account-invoicing</a>
+            <a class="reference external" href="https://github.com/OCA/account-invoicing/tree/16.0/account_invoice_pricelist">OCA/account-invoicing</a>
             project on GitHub.
           </p>
           <p>
             You are welcome to contribute. To learn how please visit
             <a class="reference external" href="https://odoo-community.org/page/Contribute">https://odoo-community.org/page/Contribute</a>
             .
           </p>
```

## odoo/addons/account_invoice_pricelist/tests/test_account_move_pricelist.py

```diff
@@ -1,28 +1,27 @@
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
 
-import hashlib
-import inspect
-
 from odoo.exceptions import UserError
 from odoo.tests import common
 
-from odoo.addons.sale.models.sale_order_line import SaleOrderLine as upstream
-
-# if this hash fails then the original function it was copied from
-# needs to be checked to see if there are any major changes that
-# need to be updated in this module's _get_real_price_currency
-
-VALID_HASHES = ["ae1579f90ae87798e0d86f6b7427d4aa"]
-
 
 class TestAccountMovePricelist(common.TransactionCase):
     @classmethod
     def setUpClass(cls):
         super().setUpClass()
+        cls.env = cls.env(
+            context=dict(
+                cls.env.context,
+                mail_create_nolog=True,
+                mail_create_nosubscribe=True,
+                mail_notrack=True,
+                no_reset_password=True,
+                tracking_disable=True,
+            )
+        )
         cls.AccountMove = cls.env["account.move"]
         cls.ProductPricelist = cls.env["product.pricelist"]
         cls.FiscalPosition = cls.env["account.fiscal.position"]
         cls.fiscal_position = cls.FiscalPosition.create(
             {"name": "Test Fiscal Position", "active": True}
         )
         cls.journal_sale = cls.env["account.journal"].create(
@@ -31,26 +30,19 @@
         # Make sure the currency of the company is USD, as this not always happens
         # To be removed in V17: https://github.com/odoo/odoo/pull/107113
         cls.company = cls.env.company
         cls.env.cr.execute(
             "UPDATE res_company SET currency_id = %s WHERE id = %s",
             (cls.env.ref("base.USD").id, cls.company.id),
         )
-        cls.at_receivable = cls.env["account.account.type"].create(
-            {
-                "name": "Test receivable account",
-                "type": "receivable",
-                "internal_group": "income",
-            }
-        )
         cls.a_receivable = cls.env["account.account"].create(
             {
                 "name": "Test receivable account",
-                "code": "TEST_RA",
-                "user_type_id": cls.at_receivable.id,
+                "code": "TESTRA",
+                "account_type": "asset_receivable",
                 "reconcile": True,
             }
         )
         cls.product = cls.env["product.template"].create(
             {"name": "Product Test", "list_price": 100.00}
         )
         cls.sale_pricelist = cls.ProductPricelist.create(
@@ -250,15 +242,14 @@
                 "rate": 1.5289,
                 "create_date": "2010-01-01",
                 "write_date": "2010-01-01",
             }
         )
 
     def test_account_invoice_pricelist(self):
-        self.invoice._onchange_partner_id_account_invoice_pricelist()
         self.assertEqual(self.invoice.pricelist_id, self.sale_pricelist)
 
     def test_account_invoice_change_pricelist(self):
         self.invoice.pricelist_id = self.sale_pricelist.id
         self.invoice.button_update_prices_from_pricelist()
         invoice_line = self.invoice.invoice_line_ids[:1]
         self.assertEqual(invoice_line.price_unit, 60.00)
@@ -282,50 +273,42 @@
         self.invoice.pricelist_id = self.sale_pricelist_without_discount.id
         self.invoice.button_update_prices_from_pricelist()
         invoice_line = self.invoice.invoice_line_ids[:1]
         self.assertEqual(invoice_line.price_unit, 100.00)
         self.assertEqual(invoice_line.discount, 10.00)
 
     def test_account_invoice_pricelist_with_discount_secondary_currency(self):
-        self.invoice.currency_id = self.euro_currency.id
         self.invoice.pricelist_id = self.sale_pricelist_with_discount_in_euros.id
         self.invoice.button_update_prices_from_pricelist()
         invoice_line = self.invoice.invoice_line_ids[:1]
         self.assertAlmostEqual(invoice_line.price_unit, 58.87)
         self.assertEqual(invoice_line.discount, 0.00)
 
     def test_account_invoice_pricelist_without_discount_secondary_currency(self):
-        self.invoice.currency_id = self.euro_currency.id
         self.invoice.pricelist_id = self.sale_pricelist_without_discount_in_euros.id
         self.invoice.button_update_prices_from_pricelist()
         invoice_line = self.invoice.invoice_line_ids[:1]
         self.assertAlmostEqual(invoice_line.price_unit, 65.41)
         self.assertEqual(invoice_line.discount, 10.00)
 
     def test_account_invoice_fixed_pricelist_with_discount_secondary_currency(self):
-        self.invoice.currency_id = self.euro_currency.id
         self.invoice.pricelist_id = self.sale_pricelist_fixed_with_discount_in_euros.id
         self.invoice.button_update_prices_from_pricelist()
         invoice_line = self.invoice.invoice_line_ids[:1]
         self.assertEqual(invoice_line.price_unit, 60.00)
         self.assertEqual(invoice_line.discount, 0.00)
 
     def test_account_invoice_fixed_pricelist_without_discount_secondary_currency(self):
-        self.invoice.currency_id = self.euro_currency.id
         self.invoice.pricelist_id = self.sale_pricelist_fixed_wo_disc_euros.id
         self.invoice.button_update_prices_from_pricelist()
         invoice_line = self.invoice.invoice_line_ids[:1]
         self.assertAlmostEqual(invoice_line.price_unit, 65.41)
         self.assertEqual(invoice_line.discount, 8.27)
 
-    def test_upstream_file_hash(self):
-        """Test that copied upstream function hasn't received fixes"""
-        func = inspect.getsource(upstream._get_real_price_currency).encode()
-        func_hash = hashlib.md5(func).hexdigest()
-        self.assertIn(func_hash, VALID_HASHES)
-
     def test_check_currency(self):
         with self.assertRaises(UserError):
-            self.invoice.currency_id = self.usd_currency.id
-            self.invoice.write(
+            self.invoice.with_context(force_check_currecy=True).write(
                 {"pricelist_id": self.sale_pricelist_with_discount_in_euros.id}
             )
+            self.invoice.with_context(force_check_currecy=True).write(
+                {"currency_id": self.usd_currency.id}
+            )
```

## odoo/addons/account_invoice_pricelist/views/account_invoice_view.xml

### odoo/addons/account_invoice_pricelist/views/account_invoice_view.xml

```diff
@@ -1,32 +1,33 @@
 <?xml version="1.0" encoding="utf-8"?>
 <odoo>
   <record id="view_account_move_customer_form" model="ir.ui.view">
     <field name="model">account.move</field>
     <field name="inherit_id" ref="account.view_move_form"/>
     <field name="arch" type="xml">
       <button name="action_invoice_sent" position="before">
-        <button type="object" name="button_update_prices_from_pricelist" string="Update prices" attrs="{'invisible': ['|', '|', ('pricelist_id', '=', False), ('state', 'not in', ['draft']), ('move_type', 'not in', ['out_invoice', 'out_refund', 'in_invoice', 'in_refund'])]}" help="Update price in lines from the pricelist"/>
+        <button type="object" name="button_update_prices_from_pricelist" groups="product.group_product_pricelist" string="Update prices" attrs="{'invisible': ['|', '|', ('pricelist_id', '=', False), ('state', 'not in', ['draft']), ('move_type', 'not in', ['out_invoice', 'out_refund'])]}" help="Update price in lines from the pricelist"/>
       </button>
-      <field name="currency_id" position="attributes">
-        <attribute name="force_save">1</attribute>
+      <xpath expr="//group[@id='header_right_group']//field[@name='currency_id']" position="attributes">
         <attribute name="attrs">{'readonly': [('pricelist_id', '!=', False)]}</attribute>
-      </field>
+      </xpath>
+      <xpath expr="//group[@id='header_right_group']/field[@name='currency_id']" position="attributes">
+        <attribute name="attrs">{'readonly': [('pricelist_id', '!=', False)]}</attribute>
+      </xpath>
       <xpath expr="//div[field[@name='journal_id']]" position="after">
-        <field name="pricelist_id" attrs="{'invisible': [('move_type', 'not in', ['out_invoice', 'out_refund', 'in_invoice', 'in_refund'])]}"/>
+        <field name="pricelist_id" invisible="1" groups="!product.group_product_pricelist"/>
+        <field name="pricelist_id" groups="product.group_product_pricelist" attrs="{'invisible': [('move_type', 'not in', ['out_invoice', 'out_refund'])]}"/>
       </xpath>
     </field>
   </record>
-  <record id="account_invoice_filter_inherit_account_pricelist" model="ir.ui.view">
-    <field name="name">account.invoice.select.inherit.account_pricelist</field>
-    <field name="mode">primary</field>
+  <record id="view_account_invoice_filter" model="ir.ui.view">
+    <field name="name">account.invoice.select.account_pricelist</field>
     <field name="model">account.move</field>
     <field name="inherit_id" ref="account.view_account_invoice_filter"/>
     <field name="arch" type="xml">
-      <xpath expr="//filter[@name='late']" position="before">
-        <separator/>
-        <filter string="Pricelist" name="pricelist" context="{'group_by':'pricelist_id'}" invisible="context.get('move_type', '') not in ['out_invoice', 'out_refund']"/>
-        <separator/>
+      <xpath expr="//group/filter[@name='status']" position="after">
+        <filter string="Pricelist" name="pricelist" groups="product.group_product_pricelist" context="{'group_by':'pricelist_id'}" invisible="context.get('default_move_type', '') not in ['out_invoice', 'out_refund']"/>
       </xpath>
     </field>
   </record>
+  <menuitem id="menu_product_pricelist_main" parent="account.menu_finance_receivables" name="Pricelists" action="product.product_pricelist_action2" groups="product.group_product_pricelist" sequence="105"/>
 </odoo>
```

## Comparing `odoo_addon_account_invoice_pricelist-15.0.1.0.2.dist-info/METADATA` & `odoo_addon_account_invoice_pricelist-16.0.1.0.0.3.dist-info/METADATA`

 * *Files 3% similar despite different names*

```diff
@@ -1,22 +1,22 @@
 Metadata-Version: 2.1
 Name: odoo-addon-account-invoice-pricelist
-Version: 15.0.1.0.2
+Version: 16.0.1.0.0.3
 Summary: Add partner pricelist on invoices
 Home-page: https://github.com/OCA/account-invoicing
 Author: GRAP,Therp BV,Tecnativa,Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
 Classifier: Framework :: Odoo
-Classifier: Framework :: Odoo :: 15.0
+Classifier: Framework :: Odoo :: 16.0
 Classifier: License :: OSI Approved :: GNU Affero General Public License v3
-Requires-Python: >=3.8
-Requires-Dist: odoo (<15.1dev,>=15.0a)
+Requires-Python: >=3.10
+Requires-Dist: odoo (<16.1dev,>=16.0a)
 
 ===============================
 Account - Pricelist on Invoices
 ===============================
 
 .. !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    !! This file is generated by oca-gen-addon-readme !!
@@ -26,31 +26,31 @@
 .. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
     :target: https://odoo-community.org/page/development-status
     :alt: Beta
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
     :alt: License: AGPL-3
 .. |badge3| image:: https://img.shields.io/badge/github-OCA%2Faccount--invoicing-lightgray.png?logo=github
-    :target: https://github.com/OCA/account-invoicing/tree/15.0/account_invoice_pricelist
+    :target: https://github.com/OCA/account-invoicing/tree/16.0/account_invoice_pricelist
     :alt: OCA/account-invoicing
 .. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
-    :target: https://translation.odoo-community.org/projects/account-invoicing-15-0/account-invoicing-15-0-account_invoice_pricelist
+    :target: https://translation.odoo-community.org/projects/account-invoicing-16-0/account-invoicing-16-0-account_invoice_pricelist
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runbot-Try%20me-875A7B.png
-    :target: https://runbot.odoo-community.org/runbot/95/15.0
+    :target: https://runbot.odoo-community.org/runbot/95/16.0
     :alt: Try me on Runbot
 
 |badge1| |badge2| |badge3| |badge4| |badge5| 
 
 * Add a stored field pricelist on invoices, related to the partner pricelist;
 * Use this pricelist when manually adding invoice lines;
 * Rules defined in pricelists applied in multicurrency context;
 * Possibility to group by pricelist on account.invoice view;
 
-.. image:: https://raw.githubusercontent.com/OCA/account-invoicing/15.0/account_invoice_pricelist/static/src/description/screenshot_group_by.png
+.. image:: https://raw.githubusercontent.com/OCA/account-invoicing/16.0/account_invoice_pricelist/static/src/description/screenshot_group_by.png
 
 For further information, please visit:
 
 * https://www.odoo.com/forum/help-1
 
 **Table of contents**
 
@@ -59,15 +59,15 @@
 
 Bug Tracker
 ===========
 
 Bugs are tracked on `GitHub Issues <https://github.com/OCA/account-invoicing/issues>`_.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us smashing it by providing a detailed and welcomed
-`feedback <https://github.com/OCA/account-invoicing/issues/new?body=module:%20account_invoice_pricelist%0Aversion:%2015.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
+`feedback <https://github.com/OCA/account-invoicing/issues/new?body=module:%20account_invoice_pricelist%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
 
 Do not contact contributors directly about support or help with technical issues.
 
 Credits
 =======
 
 Authors
@@ -97,12 +97,12 @@
    :alt: Odoo Community Association
    :target: https://odoo-community.org
 
 OCA, or the Odoo Community Association, is a nonprofit organization whose
 mission is to support the collaborative development of Odoo features and
 promote its widespread use.
 
-This module is part of the `OCA/account-invoicing <https://github.com/OCA/account-invoicing/tree/15.0/account_invoice_pricelist>`_ project on GitHub.
+This module is part of the `OCA/account-invoicing <https://github.com/OCA/account-invoicing/tree/16.0/account_invoice_pricelist>`_ project on GitHub.
 
 You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
```

## Comparing `odoo_addon_account_invoice_pricelist-15.0.1.0.2.dist-info/RECORD` & `odoo_addon_account_invoice_pricelist-16.0.1.0.0.3.dist-info/RECORD`

 * *Files 2% similar despite different names*

```diff
@@ -1,11 +1,11 @@
-odoo/addons/account_invoice_pricelist/README.rst,sha256=XpV-18ULFybVOzsianQq-I-uGROVxWu0o1mnaMp9lOM,3469
+odoo/addons/account_invoice_pricelist/README.rst,sha256=17ZRCe3DzN-EiCqPOx320nSbNdFGjqcSGpa3GXjopcE,3469
 odoo/addons/account_invoice_pricelist/__init__.py,sha256=X9EJGOE2GtZbS0G82PtSXmWSZ_R8jEM0rlJTDliQjp4,21
-odoo/addons/account_invoice_pricelist/__manifest__.py,sha256=EQMMZV8jsJjDeRt3cdfsmP0mbBmjcOyC9_JkvDOg5f4,505
-odoo/addons/account_invoice_pricelist/i18n/account_invoice_pricelist.pot,sha256=KTeD6OybC93PFiImu8PTt6hRzToyldH01vmRCXBjGQA,1694
+odoo/addons/account_invoice_pricelist/__manifest__.py,sha256=EpVMjLZ84kmjaVlEibANq78fstlg-5t7ycA6bvTwCPI,505
+odoo/addons/account_invoice_pricelist/i18n/account_invoice_pricelist.pot,sha256=2P6nVroLZnfDEnjtlcYYkVbyGYwTmCyqR-mKpEJDGNU,1834
 odoo/addons/account_invoice_pricelist/i18n/ar.po,sha256=4jp9AaUKwR_gcYobz7jKbtTqOiTobqib0-6Rik1o6g4,2185
 odoo/addons/account_invoice_pricelist/i18n/bg.po,sha256=sHxW4tmAaAjmen0OQ8W6HscMUwGrTr96oiGN4DHL3zo,2045
 odoo/addons/account_invoice_pricelist/i18n/bs.po,sha256=CI96QnOF91Y3I4RQhmOnvMwkTp5c8mTugarOdgaNh7I,2165
 odoo/addons/account_invoice_pricelist/i18n/ca.po,sha256=2z9SS8sBYZtdqRBhxB3zFIpVQAv-oIxVRGuadG419Tg,2203
 odoo/addons/account_invoice_pricelist/i18n/cs.po,sha256=nhTawJpfVlSt9OADXAULkrnCONo-kaGhuTLxi7hbXEA,2114
 odoo/addons/account_invoice_pricelist/i18n/de.po,sha256=Ntfc8FdAykpNFevOUzCZyGT7xF2ri8WXDL910oFv5uY,2185
 odoo/addons/account_invoice_pricelist/i18n/el_GR.po,sha256=MbbQBZvk7Cz3u2C7UDmAksMV5kfJA9wWr_KT3icyl9o,2060
@@ -46,24 +46,22 @@
 odoo/addons/account_invoice_pricelist/i18n/sl.po,sha256=h4yQP4g6tC5HzJ8Mb-4jNlLGB1P730VY-K4CTDd_CW4,2164
 odoo/addons/account_invoice_pricelist/i18n/sv.po,sha256=SY_zWJUxnCMnnzWlEViot7xxEwNTv9x9AcW0Pt-ykdM,2084
 odoo/addons/account_invoice_pricelist/i18n/th.po,sha256=Hlc03NtCd07PDYjhyuKg7Ky60oMSGj5lsZd_JFIoA_c,2049
 odoo/addons/account_invoice_pricelist/i18n/tr.po,sha256=cpEeP1fJJqfsZuRYUVaudhGokxcTYRocScUHbO1B4hI,2188
 odoo/addons/account_invoice_pricelist/i18n/tr_TR.po,sha256=DaPy1cTa5kJg03d-La8Eu003n3mBV0jZOIubJfuRnro,2158
 odoo/addons/account_invoice_pricelist/i18n/zh_CN.po,sha256=blrF9Nox9KSxPiXgqApVZP8AH9Nci4e9-lyF86eW0m0,2095
 odoo/addons/account_invoice_pricelist/i18n/zh_TW.po,sha256=VVUcJS8NTqPjlGrKPk1SQ9H98w6KYk_oz_G7TYmLfwg,2096
-odoo/addons/account_invoice_pricelist/l10n/account_invoice_pricelist.pot,sha256=fCZBhWBb8ghzUiEapNBNY-WLDaKkukUMS02k5JodkKA,1444
-odoo/addons/account_invoice_pricelist/l10n/fr.po,sha256=SLe1q5D0heBgq6UQcgVgW_hkJcp6wEGC6b83VjjjN_c,1802
 odoo/addons/account_invoice_pricelist/models/__init__.py,sha256=C-Rtse45fvniXpahCT40DwGPOUpDwJJ8ey3lK93vDqk,92
-odoo/addons/account_invoice_pricelist/models/account_move.py,sha256=NRcGrzFulXFjetfH5Ws8NiatnpCgVcoqU2nj63BPZyo,9564
+odoo/addons/account_invoice_pricelist/models/account_move.py,sha256=EtvzvULAWa6ESDtSGToXq3TqDmCSv1DUyEFsXpfvHHQ,4689
 odoo/addons/account_invoice_pricelist/readme/CONTRIBUTORS.rst,sha256=mofytBz-Bw_XsIa9c-ZACVZC3vVbIJavu-oK4_XXqPE,311
 odoo/addons/account_invoice_pricelist/readme/DESCRIPTION.rst,sha256=CJqE5wHWLREPv9kZEuzjfpiv5iOuE3-nqiH7GmDzKFg,396
 odoo/addons/account_invoice_pricelist/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
-odoo/addons/account_invoice_pricelist/static/description/index.html,sha256=MkszPdT9l9w-dPll14B31_Vpoy1KbFKWTOC1PM0zbpY,13444
+odoo/addons/account_invoice_pricelist/static/description/index.html,sha256=xSQlA84DrMtLBZByr82mTK6-HpffxdHEjMvK0YOI4rE,13444
 odoo/addons/account_invoice_pricelist/static/src/description/icon.png,sha256=u7q__WFLovcMnSikck5sCguDvx3rq4UKMQL8WtMLObk,5089
 odoo/addons/account_invoice_pricelist/static/src/description/screenshot_group_by.png,sha256=qmfAoQ-XuJx8gQAWgngahVTrtw97VVMcLKkWCXcAWjY,39211
 odoo/addons/account_invoice_pricelist/tests/__init__.py,sha256=F2_9GsJ-EXVt_JO_vdqkeQnk1jenwNzhsZ2qRU4tf88,107
-odoo/addons/account_invoice_pricelist/tests/test_account_move_pricelist.py,sha256=dipkXzrL9ndChLHTt4dOv7sAr32Ga2RU87YINaxyVy4,13431
-odoo/addons/account_invoice_pricelist/views/account_invoice_view.xml,sha256=n4M5K7Xr289k5lBMb_kgb4oKdLS8l_0FMKEcaVUtRdg,2263
-odoo_addon_account_invoice_pricelist-15.0.1.0.2.dist-info/METADATA,sha256=JCzXCRnu_-OAUODRhC_DuuX96LEvezjbq6cK_RuJkr4,4041
-odoo_addon_account_invoice_pricelist-15.0.1.0.2.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-odoo_addon_account_invoice_pricelist-15.0.1.0.2.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo_addon_account_invoice_pricelist-15.0.1.0.2.dist-info/RECORD,,
+odoo/addons/account_invoice_pricelist/tests/test_account_move_pricelist.py,sha256=85KWa-vtT01_s68lnjELzdLWhMXqygGAw_H4tr0sFqg,12675
+odoo/addons/account_invoice_pricelist/views/account_invoice_view.xml,sha256=v4tBXLhXJ1mtCbtH4XvnlY6R6-ZrBoo_ilCVlpGw4LM,3061
+odoo_addon_account_invoice_pricelist-16.0.1.0.0.3.dist-info/METADATA,sha256=nij3oEmI4zJN1BMBntfzwfK4fQpjtzCHgrNEwaJo87I,4044
+odoo_addon_account_invoice_pricelist-16.0.1.0.0.3.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+odoo_addon_account_invoice_pricelist-16.0.1.0.0.3.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo_addon_account_invoice_pricelist-16.0.1.0.0.3.dist-info/RECORD,,
```

